

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; UMEP Manual  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="UMEP Manual  documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> UMEP Manual
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Getting_Started.html">2. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="Pre-Processor.html">3. Pre-Processor</a></li>
<li class="toctree-l1"><a class="reference internal" href="Processor.html">4. Processor</a></li>
<li class="toctree-l1"><a class="reference internal" href="Post-Processor.html">5. Post-Processor</a></li>
<li class="toctree-l1"><a class="reference internal" href="People_Involved_&amp;_Acknowledgements.html">6. People Involved &amp; Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorials.html">7. Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="How_to_Contribute.html">8. How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="Known_Issues.html">9. Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">10. FAQ (Frequently Asked Questions)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Abbreviations.html">11. Abbreviations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">UMEP Manual</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/umep.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<ul>
<li><p class="first"><strong>Overview</strong>：</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>UMEP is developed as a plugin for <a class="reference external" href="http://www.qgis.org">QGIS</a>. Two versions are available:</dt>
<dd><ul class="first last">
<li><em>Long term release</em> - This version is recommended for most users.</li>
<li><em>Development release</em> - This version is for testing. Could be unstable.</li>
</ul>
</dd>
</dl>
</li>
<li>For a more detailed description including how to install QGIS on a Windows PC (see below) or watch this instruction <a class="reference external" href="https://www.youtube.com/watch?v=ZEw_DVl772Q">video</a>. You can find more introductory videos on how to use UMEP on our <a class="reference external" href="https://www.youtube.com/channel/UCTPkXncD3ghb5ZTdZe_u7gA">YouTube-channel</a>.</li>
<li>UMEP has been developed using Python 2.7.x and QGIS 2.x in a Windows environment. Since QGIS is a multi-platform software system it works on other platforms as well. UMEP is still under development so there may be missing documentation and instability. Please report any issues to the <a class="reference external" href="https://bitbucket.org/fredrik_ucg/umep">code repository</a>. Also, have a look in <a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#FAQ">FAQ</a> for further installation tips and issues.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Recommended Installation Steps of QGIS on Windows</strong>：</p>
<blockquote>
<div><ul class="simple">
<li>Visit <a class="reference external" href="http://www.qgis.org">QGIS</a> and go to the download page. Preferably, choose the <a class="reference external" href="http://download.osgeo.org/osgeo4w/osgeo4w-setup-x86_64.exe">**OSGEO4W Network Installer (64-bit)**</a>, start the installation and choose <em>installation (64-bit) For Advanced Users</em></li>
<li>Start the installation and choose <em>Express Desktop Install</em>. This includes a number of OSGEO-software as well as a separate python installation.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Long-term release</strong> - Download and installation of the UMEP-plugin from within QGIS：</p>
<blockquote>
<div><ol class="arabic simple">
<li>Start <strong>QGIS</strong></li>
<li>Go to: <em>Plugins -&gt; Manage and Install Plugins…</em></li>
<li>Search for <strong>UMEP</strong></li>
<li>Click <strong>Install Plugin</strong> (or <em>Upgrade</em> if already have an older version installed from before).</li>
</ol>
</div></blockquote>
</li>
<li><p class="first"><strong>Development release</strong> - Download and installation of the UMEP-plugin from the UMEP code repository (unstable)</p>
<blockquote>
<div><blockquote>
<div><ol class="arabic simple">
<li>If you have an installed version of UMEP in your QGIS, uninstall it by going to “Plugins -&gt; Manage and Install Plugins -&gt; Installed -&gt; UMEP” and click <strong>Uninstall plugin</strong></li>
<li>To download UMEP from the repository click this <a class="reference external" href="https://bitbucket.org/fredrik_ucg/umep/downloads">link</a> and download repository</li>
<li>Close QGIS if open</li>
<li>Extract the downloaded zip archive into the folder <strong>C:\Users\.qgis2\python\plugins</strong>. If the folder <strong>plugins</strong> does not exist, install any plugin using <em>Plugins -&gt; Manage and Install Plugins</em> and the folder should appear.</li>
<li>Rename the extracted folder to <strong>UMEP</strong></li>
<li>Start QGIS. The UMEP plugin should be visible in the QGIS toolbar. If not, go to “Plugins -&gt; Manage and Install Plugins -&gt; All” and search for UMEP. Make sure that you also tick in the box <em>Show also experimental plugins</em> in the “Settings”-tab.</li>
</ol>
</div></blockquote>
<ul class="simple">
<li><strong>NOTE</strong>: Remove old versions of UMEP from the plugin directory before you update.</li>
</ul>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt><strong>Test dataset</strong> ：</dt>
<dd><ul class="first last simple">
<li>Can be used try some of the tools out (<a class="reference external" href="https://bitbucket.org/fredrik_ucg/umep/downloads/testdata_UMEP.zip">testdata_UMEP.zip</a>).</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="section" id="adding-missing-python-libraries-and-other-osgeo-functionalities">
<h2>Adding missing Python libraries and other OSGeo functionalities<a class="headerlink" href="#adding-missing-python-libraries-and-other-osgeo-functionalities" title="Permalink to this headline">¶</a></h2>
<p>Some of the plugins in the UMEP tool, for example The WATCH data plugin,
requires some Python libraries such as <strong>pandas</strong> and <strong>scipy</strong> that
might not been included when you installed QGIS. If so, it is necessary
to install them to make this plugin work. Below are instructions on how
to this for different operation systems. The same procedures can also be
used to obtain other tools and functionalities from the OSGeo
repository. <strong>Note</strong>: In order for scipy to work you will also need to
make sure <em>pillow</em> is installed.</p>
<ul>
<li><p class="first"><strong>Operating System and Installation instructions</strong>：</p>
<blockquote>
<div><ol class="arabic">
<li><dl class="first docutils">
<dt>Linux</dt>
<dd><ul class="first last">
<li><p class="first">Linux comes with its own Python installation which QGIS makes use of. This makes it possible to directly use <strong>pip</strong> (an installation tool of Python libraries) to add missing libraries. Simply open a terminal window and type <em>sudo pip install pandas</em> if you want to install this library. In order to install pip open a terminal and type: <em>sudo easy_install pip</em>. You might need to restart QGIS to get it to work.</p>
</li>
<li><p class="first">Or refer to <a class="reference external" href="http://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/intro.html#the-startup-py-file">startup.py</a> to modify start up file of QGIS by including the paths to <strong>pandas</strong> and <strong>scipy</strong>. An example of startup.py may look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;/usr/local/lib/python2.7/site-packages&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Windows</dt>
<dd><ul class="first simple">
<li>There are two options available:</li>
</ul>
<blockquote class="last">
<div><ol class="arabic simple">
<li>As Windows has no Python installation included, QGIS make use of a separate Python installation added when QGIS was installed on your PC.</li>
</ol>
<blockquote>
<div><p>This results in that pip cannot be used directly. However, if you installed QGIS according to the recommendations in <a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Getting_Started">Getting started</a> you should have a <strong>OSGeo4W shell</strong> installed where you can use pip to add desired Python libraries. <strong>OSGeo4W shell</strong> is found in the Windows start menu.</p>
<p>You need to run as an administrator of your PC. To do this, right-click on <strong>OSGeo4W shell</strong> and choose <em>run as administrator</em>. In the command window that appear, write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pandas</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Installation of pandas Restart the <em>installation (64-bit) For Advanced Users</em> (see Getting started) and choose <em>Advanced Install</em>. When you come up to Select Packages search for pandas and click on <em>Skip</em> until you see a version number of pandas (see left picture). Finish the installation.</li>
</ol>
<blockquote>
<div><p><strong>This method can also be used to include other missing libraries such as gdal etc.</strong></p>
<p><strong>PLEASE NOTICE!</strong></p>
<p>Due to a recent update of <strong>netCDF4</strong> library (1.3.0), the <strong>netCDF4</strong> library has a version conflict related to the <strong>numpy</strong> version currently used in QGIS 2.18.x. This results in that some plugins in UMEP will fail, e.g. LQf.
We have submitted an issue regarding this to the QGIS community. Meanwhile, we recommend UMEP users to downgrade the netCDF4 library to <strong>1.2.9</strong>. This is easiest done by opening the <strong>OSGeo4W shell</strong> and run the two following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">uninstall</span> <span class="n">netCDF4</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">netCDF4</span><span class="o">==</span><span class="mf">1.2</span><span class="o">.</span><span class="mi">9</span>
</pre></div>
</div>
<div class="figure">
<img alt="_images/pandas.png" src="_images/pandas.png" />
</div>
<p><strong>Installation of pandas</strong></p>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</li>
<li><p class="first">Mac OS X</p>
</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Follow the instructions for Linux. <strong>*Note*</strong>: this approach is tested to be working under Mac OS X 10.11.5.</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Other platforms require the packages to be installed to the QGIS Python path, which differs depending on operating system. Or refer to <a class="reference external" href="http://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/intro.html#the-startup-py-file">startup.py</a></li>
</ol>
<blockquote>
<div><p>to modify start up file of QGIS by including the paths to <strong>pandas</strong> and
<strong>scipy</strong>. An example of startup.py may look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;/usr/local/lib/python2.7/site-packages&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="pre-processor">
<h1>Pre-Processor<a class="headerlink" href="#pre-processor" title="Permalink to this headline">¶</a></h1>
<div class="section" id="meteorological-data-metpreprocessor">
<h2>Meteorological Data: MetPreprocessor<a class="headerlink" href="#meteorological-data-metpreprocessor" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributors/Developers：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span>
</pre></div>
</div>
</li>
<li><p class="first">Introduction：</p>
<blockquote>
<div><ul>
<li><div class="first line-block">
<div class="line">MetPreprocessor can be used to transform required temporal meteorological data into the format used in UMEP. The following variables are usually required as a minimum: air temperature, relative humidity, barometric pressure, wind speed, incoming shortwave radiation and rainfall; if available, other variables can be supplied as well.</div>
</div>
<div class="line-block">
<div class="line"><em>Input data</em> can include any number of header lines and should be separated by conventional separators (e.g. comma, space, tab, etc). The <em>output format</em> is space-separated and includes time-related variables of year, day of year, hour and minute. The plugin is able to process other input time formats including month, day of month, etc.</div>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Location：</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>The Meteorological data pre-processor is located at</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>UMEP</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Pre-processor</dt>
<dd><ul class="first last">
<li>Meteorological data</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Dialog box：</p>
<blockquote>
<div><blockquote>
<div><div class="figure">
<img alt="_images/MetPreProcessor.jpg" src="_images/MetPreProcessor.jpg" />
</div>
<p>Interface for inputting an ascii data file into the correct format for SUEWS</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>top</td>
<td>input DEM data is specified</td>
</tr>
<tr class="row-even"><td>middle upper</td>
<td>input polygon with height data or OSM is specified</td>
</tr>
<tr class="row-odd"><td>middle</td>
<td>map extent is specified</td>
</tr>
<tr class="row-even"><td>middle lower</td>
<td>to specify the output DSM and output resolution</td>
</tr>
<tr class="row-odd"><td>bottom</td>
<td>to run the calculations</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Variables included in UMEP meteorological input file：</dt>
<dd><blockquote class="first">
<div><ul class="simple">
<li>if acceptable range is not reasonable (i.e. beyond the limits we have set) please contact</li>
</ul>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="2%" />
<col width="4%" />
<col width="20%" />
<col width="9%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Header</div>
<div class="line">named</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Accepted</div>
<div class="line">range*</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Comments</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>iy</td>
<td>Year [YYYY]</td>
<td>Not applicable</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>id</td>
<td>Day of year [DOY]</td>
<td><div class="first last line-block">
<div class="line">1 to 365</div>
<div class="line">(366 if leap year)</div>
</div>
</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>3</td>
<td>it</td>
<td>Hour [H]</td>
<td>0 to 23</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>imin</td>
<td>Minute [M]</td>
<td>0 to 59</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>5</td>
<td>qn</td>
<td>Net all-wave radiation [W m<sup>-2</sup>]</td>
<td>-200 to 800</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>qh</td>
<td>Sensible heat flux [W m<sup>-2</sup>]</td>
<td>-200 to 750</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>7</td>
<td>qe</td>
<td>Latent heat flux [W m<sup>-2</sup>]</td>
<td>-100 to 650</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>qs</td>
<td>Storage heat flux [W m<sup>-2</sup>]</td>
<td>-200 to 650</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>9</td>
<td>qf</td>
<td>Anthropogenic heat flux [W m<sup>-2</sup>]</td>
<td>0 to 1500</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>U</td>
<td>Wind speed [m s<sup>-1</sup>]</td>
<td>0.001 to 60</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>11</td>
<td>RH</td>
<td>Relative Humidity [%]</td>
<td>5 to 100</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>12</td>
<td>Tair</td>
<td>Air temperature [°C]</td>
<td>-30 to 55</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>13</td>
<td>pres</td>
<td>Surface barometric pressure [kPa]</td>
<td>90 to 107</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>14</td>
<td>rain</td>
<td>Rainfall [mm]</td>
<td>0 to 30</td>
<td>(per 5 min) this should be scaled based on time step used</td>
</tr>
<tr class="row-even"><td>15</td>
<td>kdown</td>
<td>Incoming shortwave radiation [W m<sup>-2</sup>]</td>
<td>0 to 1200</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>snow</td>
<td>Snow [mm]</td>
<td>0 to 300</td>
<td>(per 5 min) this should be scaled based on time step used</td>
</tr>
<tr class="row-even"><td>17</td>
<td>ldown</td>
<td>Incoming longwave radiation [W m<sup>-2</sup>]</td>
<td>100 to 600</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>18</td>
<td>fcld</td>
<td>Cloud fraction [tenths]</td>
<td>0 to 1</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>19</td>
<td>wuh</td>
<td>External water use [m:sup:<code class="xref any docutils literal notranslate"><span class="pre">3</span></code>]</td>
<td>0 to 10</td>
<td>(per 5 min) scale based on time step being used</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>xsmd</td>
<td><div class="first last line-block">
<div class="line">(Observed) soil moisture</div>
<div class="line">[m:sup:<code class="xref any docutils literal notranslate"><span class="pre">3</span></code> m<sup>-3</sup> or kg kg<sup>-1</sup>]</div>
</div>
</td>
<td>0.01 to 0.5</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>21</td>
<td>lai</td>
<td>(Observed) leaf area index [m:sup:<code class="xref any docutils literal notranslate"><span class="pre">2</span></code> m<sup>-2</sup>]</td>
<td>0 to 15</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>22</td>
<td>kdiff</td>
<td>Diffuse shortwave radiation [W m<sup>-2</sup>]</td>
<td>0 to 600</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>23</td>
<td>kdir</td>
<td>Direct shortwave radiation [W m<sup>-2</sup>]</td>
<td>0 to 1200</td>
<td>Should be perpendicular to the Sun beam. One way to check this is to compare direct and global radiation and see if kdir is higher than global radiation during clear weather. Then kdir is measured perpendicular to the solar beam.</td>
</tr>
<tr class="row-odd"><td>24</td>
<td>wdir</td>
<td>Wind direction [°]</td>
<td>0 to 360</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote class="last">
<div><div class="figure">
<img alt="_images/table.png" src="_images/table.png" />
</div>
</div></blockquote>
</dd>
</dl>
</li>
<li><p class="first">Remarks：</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">If decimal time is ticked in, <strong>day of year column</strong> must be stated and the <strong>decimal time column</strong> should be numbers between 0 and 1.</p>
</li>
<li><p class="first">If you have problems with importing a data set. Do a time series plot using small points. Check (1) are there any data gaps (there can be no gaps) (2) are the columns lined up throughout the data setes (e.g if variable suddenly changes incorrectly, you may have columns misaligned).</p>
</li>
<li><p class="first">Gapfilling - there are a number of techniques that can be used for this
1. A fast way to get started (you can come back and refine to a more appropriate method)</p>
<blockquote>
<div><ol class="arabic simple">
<li>Linear fit between one or two missing periods using the data on either</li>
<li>Create diurnal average for each variabel for short periods (e.g. 2 weeks) and use these values to fill missing data</li>
</ol>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="meteorological-data-download-data-watch">
<h2>Meteorological Data: Download data (WATCH)<a class="headerlink" href="#meteorological-data-download-data-watch" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributors：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Andy</span> <span class="n">Gabey</span> <span class="p">(</span><span class="n">University</span> <span class="n">of</span> <span class="n">Reading</span><span class="p">),</span> <span class="n">Ting</span> <span class="n">Sun</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span>
<span class="n">Helen</span> <span class="n">Ward</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Lingbo</span> <span class="n">Xue</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Zhe</span> <span class="n">Zhang</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span>
<span class="n">Tom</span> <span class="n">Kokkonen</span> <span class="p">(</span><span class="n">University</span> <span class="n">of</span> <span class="n">Helsinki</span><span class="p">),</span> <span class="n">Leena</span> <span class="n">Järvi</span> <span class="p">(</span><span class="n">Helsinki</span><span class="p">),</span> <span class="n">Sue</span> <span class="n">Grimmond</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction：</dt>
<dd><ol class="first arabic simple">
<li>Basic meteorological variables are required for most applications in the UMEP processor. If observed data are not available for a particular location, the global <a class="reference external" href="http://www.eu-watch.org/">WATCH</a> forcing datasets (Weedon et al. 2011, 2014) can be used to provide this information.</li>
<li>The WATCH data downloader allows climate reanalysis data to be extracted for a specific location and period of interest, and (optionally) transformed into annual files in a format suitable for models within UMEP.</li>
</ol>
<blockquote class="last">
<div><ul class="simple">
<li>The <a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Abbreviations">WFD</a> dataset is based on 40-year <a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Abbreviations">ECMWF</a> Re-analysis data (ERA-40) and is available at half-degree resolution for 1901-2001.</li>
<li>The <a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Abbreviations">WFDEI</a> dataset is based on <a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Abbreviations">ERA</a>-interim re-analysis data and is available at half-degree resolution for 1979-2012.</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variables available</th>
<th class="head">Comments</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Wind speed [m s<sup>-1</sup>]</td>
<td>10 m instantaneous</td>
</tr>
<tr class="row-odd"><td>Air temperature [K]</td>
<td>2 m instantaneous</td>
</tr>
<tr class="row-even"><td>Specific humidity [kg kg<sup>-1</sup>]</td>
<td>2 m instantaneous</td>
</tr>
<tr class="row-odd"><td>Pressure [Pa]</td>
<td>Instantaneous surface pressure</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Incoming shortwave radiation</div>
<div class="line">[W m<sup>-2</sup>]</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Average over previous 3 hours in WFDEI and over next</div>
<div class="line">3 hours in WFD, surface flux</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Incoming longwave radiation</div>
<div class="line">[W m<sup>-2</sup>]</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Average over previous 3 hours in WFDEI and over next</div>
<div class="line">3 hours in WFD, surface flux</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Rainfall rate</div>
<div class="line">[kg m<sup>-2</sup> s<sup>-1</sup>]</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Average over previous 3 hours in WFDEI and over next</div>
<div class="line">3 hours in WFD. CRU and GPCC bias correction options.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Snowfall rate</div>
<div class="line">[kg m<sup>-2</sup> s<sup>-1</sup>]</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Average over previous 3 hours in WFDEI and over next</div>
<div class="line">3 hours in WFD. CRU and GPCC bias correction options.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong>
-  The current downscaling procedure <strong>only</strong> deals with WFDEI data; a module for WFD is under development.
-  All precipitation corrections are currently conducted based on <strong>CRU</strong> option.
-  Data is drawn from a subset of the full WATCH dataset that does not cover the entire globe but includes Europe and the majority of Asian countries excluding Russia at this time. More regions may be added in the future. The map below shows current coverage:</p>
<div class="figure">
<img alt="_images/350px-Watch_masked.png" src="_images/350px-Watch_masked.png" />
</div>
<p>Available data in WATCH downloader (overlaid on countries)</p>
</div></blockquote>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The WATCH data pre-processor is located at:</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Meteorological data</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>WATCH data</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<ul class="simple">
<li>Follow the instruction at <a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Adding_missing_Python_libraries">link</a>.</li>
</ul>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Obtaining WATCH data via UMEP：</dt>
<dd><div class="first figure">
<img alt="_images/Watch_downloader_2.png" src="_images/Watch_downloader_2.png" />
</div>
<p class="last">Integrated WATCH data downloader: control panel</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Running the tool：</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>The downloader is separated into two sections:</dt>
<dd><ol class="first last arabic">
<li><dl class="first docutils">
<dt><strong>Download climate data</strong>: Retrieves WATCH data for all variables for the location and period of interest. This saves a NetCDF (.nc) file that contains all variables at 3 h resolution that can be used directly by ExtremeFinder.</dt>
<dd><ul class="first last">
<li><em>Latitude</em> and <em>longitude</em>: WGS84 co-ordinates of the study location. Data is extracted from the WATCH grid cell that contains these co-ordinates.</li>
<li><em>Start time</em> and <em>End Time</em>: The time range of data to be downloaded (inclusive; to the nearest month)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Refine downloaded data</strong>: Before the WATCH data can be loaded into models such as SUEWS, it must be downscaled, separated into annual files and refined. These controls perform the refinement on the .nc file downloaded in part (1) and save the results as a text file that can be loaded into further models. The resulting file contains data at 1 hour intervals, with estimates or placeholders for meteorological variables not present in WATCH.</dt>
<dd><ul class="first last">
<li><em>Site height</em>: Height above sea level of the desired measurement site. This applies adjustments to meteorological parameters based on the height above ground level. Data are available from 1 January 1979 to 31 December 2015.</li>
<li><em>UTC offset</em>: Adjusts the UTC time used in the original WATCH dataset to a local time (e.g., for Beijing time, UTC Offset = 8 h should be specified). <strong>NOTE:</strong> As of now the tool does not support half hour-timezones.</li>
<li><em>Rain hours per 3h</em>: Rain events in the location of interest may be very short – information that is lost because the WATCH data is produced at 3 h intervals, within which it is assumed rain is continuous. This control limits the duration of rain in the 1-hour file to 1, 2 or 3 hours within each 3 hour interval.</li>
<li><em>Path to LQF results</em>: Incorporates results data from the LQF model into the disaggregated data. Note that this feature produces one file per LQF grid cell and year.</li>
</ul>
</dd>
</dl>
</li>
</ol>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Considerations：</dt>
<dd><ul class="first last simple">
<li><strong>Spatial resolution</strong>: The WATCH data are provided for half-degree grid boxes. In regions with substantial heterogeneity within these grid boxes data at the grid-box scale may be not be representative of your study site (e.g. mountainous regions, urban areas).</li>
<li><strong>Temporal resolution</strong>: The data are downloaded at 3 h resolution and are linearly downscaled to 1 h time steps during the refinement step, during which radiation data are corrected for sunrise/sunset.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References：</dt>
<dd><ul class="first last simple">
<li>Kokkonen et al. (2017, in review)</li>
<li>Ward et al. (2017, in review)</li>
<li>Weedon GP, Gomes S, Viterbo P, Shuttleworth WJ, Blyth E, Österle H, Adam JC, Bellouin N, Boucher O and Best MJ (2011) Creation of the WATCH Forcing Data and Its Use to Assess Global and Regional Reference Crop Evaporation over Land during the Twentieth Century. <a class="reference external" href="http://journals.ametsoc.org/doi/abs/10.1175/2011JHM1369.1">Journal of Hydrometeorology 12, 823-848</a></li>
<li>Weedon GP, Balsamo G, Bellouin N, Gomes S, Best MJ and Viterbo P (2014) The WFDEI meteorological forcing data set: WATCH Forcing Data methodology applied to ERA-Interim reanalysis data. <a class="reference external" href="http://onlinelibrary.wiley.com/doi/10.1002/2014WR015638/abstract">Water Resour. Res. 50, 7505-7514</a>                                                                                                                                                                                                                                                                                                                                                                                                                     |</li>
<li>Tan YS (2015) MSc Thesis, University of Reading</li>
<li>Xue L (2016) MSc Thesis, University of Reading</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="spatial-data-spatial-data-downloader">
<h2>Spatial Data: Spatial Data Downloader：：<a class="headerlink" href="#spatial-data-spatial-data-downloader" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Developer：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Andy</span> <span class="n">Gabey</span> <span class="p">(</span><span class="n">Univiersity</span> <span class="n">of</span> <span class="n">Reading</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction：</dt>
<dd><ul class="first last simple">
<li>The Spatial Data Downloader downloads geo-datasets useful for UMEP applications. Only the necessary section of the data is downloaded, so that disk use and download time are minimised.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>The spatial data downloader resides at:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>UMEP</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Pre-processor</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Spatial Data</dt>
<dd><ul class="first last">
<li>Spatial Data Downloader</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog box:</dt>
<dd><div class="first figure">
<img alt="_images/650px-Downloader.png" src="_images/650px-Downloader.png" />
</div>
<p class="last">Dialog for the Spatial Data Downloader plugin</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Category and available datasets:</dt>
<dd><ul class="first last simple">
<li>Each category contains multiple datasets, which are revealed by clicking the category name. To download a dataset, select it from the list, specify the geographic extent and press “Download”</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Abstract：</dt>
<dd><ul class="first last simple">
<li>Information about the selected dataset, including citation information.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Bounding box：</dt>
<dd><ul class="first last simple">
<li>The geographic extent of the region to download (maximum download size is 500x500 pixels in the case of raster data). The current QGIS canvas extent can also be used by clicking <strong>Use canvas extent</strong></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Reproject to current project CRS：</dt>
<dd><ul class="first last simple">
<li>The downloaded data is saved in its original CRS by default. This option reprojects the saved data to the project CRS and performs resampling, the resolution of which is controlled by the “Pixel resolution in CRS units” box.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Get data：</dt>
<dd><ul class="first last simple">
<li>Refreshes the catalogue of available datasets. This is also updated when QGIS starts.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Update list:</dt>
<dd><ul class="first last simple">
<li>Refreshes the catalogue of available datasets. This is also updated when QGIS starts.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last simple">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="spatial-data-dsm-generator">
<h2>Spatial Data: DSM Generator<a class="headerlink" href="#spatial-data-dsm-generator" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Developer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Nils</span> <span class="n">Wallenberg</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>Digital Surface Models (DSMs) is not always available for the area you want to investigate. The <strong>DSM Generator</strong> can be used to create or alter a DSM by using information from a polygon building footprint layer where a building height attribute is available. An option to acquire building footprints, and also in some cases building height from [Open Street Map](<a class="reference external" href="http://www.openstreetmap.org">http://www.openstreetmap.org</a>) data, is also available.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The DSM Generator is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Spatial Data</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>DSM Generator</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog box:</dt>
<dd><div class="first last figure">
<img alt="_images/DSMGenerator.png" src="_images/DSMGenerator.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections:</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>top</td>
<td>input DEM data is specified</td>
</tr>
<tr class="row-even"><td>middle upper</td>
<td>input polygon with height data or OSM is specified</td>
</tr>
<tr class="row-odd"><td>middle</td>
<td>map extent is specified</td>
</tr>
<tr class="row-even"><td>middle lower</td>
<td>to specify the output DSM and output resolution</td>
</tr>
<tr class="row-odd"><td>bottom</td>
<td>to run the calculations</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>Digital Elevation Model:</dt>
<dd><ul class="first last">
<li>A raster file containing elevation values needed to create the DSM</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Polygon Vector File:</dt>
<dd><ul class="first last">
<li>A polygon vector file including height values of buildings needed to create the DSM</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Necessary attributes:</dt>
<dd><ul class="first last">
<li>Building height values in meters</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Use Open Street Map:</dt>
<dd><ul class="first last">
<li>Tick this in if you do not have a polygon layer with building heights. Open Street Map (© OpenStreetMap contributors) data will be used instead. If no building height is found <strong>building level height</strong> will be used instead. Set to appropriate value, e.g. a three level building with building level height set to 3 will be 3 * 3 = 9 meters high.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Save OSM as shapefile:</dt>
<dd><ul class="first last">
<li>Tick this in if you want to save the Open Street Map data as a polygon layer. This can be used if you want to look at what values has been used and if you want to add values manually.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Map extent:</dt>
<dd><ul class="first last">
<li>Set either to map canvas extent or extent from layer. Extent have to be smaller or equal to the raster DEM extent specified in the top section.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Digital Surface Model:</dt>
<dd><ul class="first last">
<li>Set output for the generated DSM. Also set output resolution.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last">
<li>Starts the calculations</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first last">
<li>One GeoTIFF is created, a DSM.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks:</dt>
<dd><ul class="first last">
<li>The DEM raster and map canvas should be in a projection with meters as units.</li>
<li>Raster elevation data (DEM) can be retrieved from e.g. <a class="reference external" href="http://www.opendem.info/">OpenDEM</a>.</li>
<li>If you use Open Street Map make sure you read <a class="reference external" href="http://www.openstreetmap.org/copyright">Open Street Map</a> © OpenStreetMap contributors.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="spatial-data-tree-generator">
<h2>Spatial Data: Tree Generator<a class="headerlink" href="#spatial-data-tree-generator" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Developer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>Information 3d vegetation is not a common spatial information available. The <strong>Tree Generator</strong> can be used to create or alter a vegetation CDSM and TDSM (see [abbreviations](<a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Abbreviations">http://urban-climate.net/umep/UMEP_Manual#Abbreviations</a>)). Be using information from a point layer where the location of the points specifies the tree positions and the attributes sets the shape of the trees, it is possible to produce a the 3d vegetation needed for e.g. Mean radiant temperature modelling (SOLWEIG) or Urban Energy Balance modelling (SUEWS) in UMEP.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The Tree Generator is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Spatial Data</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Tree Generator</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog box:</dt>
<dd><div class="first last figure">
<img alt="_images/Treegeneratorsolweig.png" src="_images/Treegeneratorsolweig.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections:</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>top</td>
<td>input data is specified</td>
</tr>
<tr class="row-even"><td>bottom</td>
<td>to specify the output and to run the calculations</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>Point vector file:</dt>
<dd><ul class="first last">
<li>A point vector file including the appropriate attributes for generating the vegetation DSMs</li>
</ul>
</dd>
</dl>
</li>
<li>Necessary attributes:</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Tree type</td>
<td><div class="first last line-block">
<div class="line">Two different tree types (shapes) are currently included: 1 = conifer and 2 = decidouos.</div>
<div class="line">There is also a possibility to remove vegetation by setting tree type = 0</div>
<div class="line">and with an appropriate diameter to remove all vegetation pixels from the DSMs.</div>
</div>
</td>
</tr>
<tr class="row-even"><td>Total height</td>
<td>This is the total height of the tree from the ground (magl).</td>
</tr>
<tr class="row-odd"><td>Trunk height</td>
<td>This is the height up to the bottom of the canopy (magl).</td>
</tr>
<tr class="row-even"><td>Diameter</td>
<td>This is the circular diameter of the tree in meter.</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>Bollean building grid exist:</dt>
<dd><ul class="first last">
<li>Tick this in if a boolen building grid exist for your model domain. This can be generated from the SOLWEIG-plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Building and Ground DSM:</dt>
<dd><ul class="first last">
<li>A DSM consisting of ground and building heights.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Ground DEM:</dt>
<dd><ul class="first last">
<li>A DEM cosisting of ground heights.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Building grid:</dt>
<dd><ul class="first last">
<li>A grid where building pixels are 0 and all other pixels are 1.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vegetation Canopy DSM:</dt>
<dd><ul class="first last">
<li>A DSM consisting of pixels with vegetation heights above ground.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vegetation Trunk Zone DSM:</dt>
<dd><ul class="first last">
<li>A DSM (geoTIFF) consisting of pixels with vegetation trunk zone heights above ground.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last">
<li>A specified folder where the result will be saved.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last">
<li>starts the calculations</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last">
<li>closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first last">
<li>Two geoTIFFs are created, one CDSM and one TDSM.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks:</dt>
<dd><ul class="first last">
<li>All DSMs need to have the same extent and pixel</li>
<li>To ceate a bush, set trunk height to</li>
<li>The SOLWEIG plugin cn be used to create the boolean building grid as well as a TDSM based on a</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="spatial-data-lcz-converter">
<h2>Spatial Data: LCZ Converter<a class="headerlink" href="#spatial-data-lcz-converter" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Natalie</span> <span class="n">Theeuwes</span> <span class="p">(</span><span class="n">University</span> <span class="n">of</span> <span class="n">Reading</span><span class="p">),</span>
<span class="n">Andy</span> <span class="n">Gabey</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span>
<span class="n">Sue</span> <span class="n">Grimmond</span> <span class="p">(</span><span class="n">Reading</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The Local climate zone (LCZ) converter calculates land cover fractions (see land cover reclassifier) on a vector grid based on LCZ raster maps from the <a class="reference external" href="http://www.wudapt.org/">WUDAPT portal</a>. The local climate zone are urban area classified based on the <a class="reference external" href="http://journals.ametsoc.org/doi/abs/10.1175/BAMS-D-11-00019.1">Stewart and Oke (2012)</a> scheme.</li>
<li>The raster LCZ maps can be converted into maps of land cover fraction and morphometric properties. For this conversion we use paved, building and pervious fraction for each LCZ from <a class="reference external" href="http://onlinelibrary.wiley.com/doi/10.1002/joc.3746/abstract">Stewart et al. (2014)</a>. However, what exactly the pervious fraction consists of (grass, trees, bare soil or water) needs to be user-specified. Similarly, morphometric properties for the buildings are specified in this scheme, but the vegetation morphometric properties still need to be specified by the user.</li>
</ul>
</dd>
</dl>
<div class="figure">
<img alt="_images/700px-LCZ_description.png" src="_images/700px-LCZ_description.png" />
</div>
<p>The definition of the different local climate zones (LCZ)</p>
<p>Note: In UMEP we refer to the rural LCZ’s as 101, 102, 103, 104, 105, 106 and 107 instead of A, B, C, D, E, F and G.</p>
</li>
<li><p class="first">Location:
- The Tree LCZ converter is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Spatial Data</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>LCZ converter</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog box:</dt>
<dd><ul class="first simple">
<li>The first tab in the LCZ converter dialog shows a table. This table includes land cover fractions and morphometric properties for buildings and vegetation for each local climate zone. If the default values in the table are not appropriate for the selected city the user has a choice between editing the table directly or using the “pervious distribution” tab in order to provide approximate values for the distribution between grass, bare soil, trees and water and the height of the vegetation.</li>
<li>Within the “pervious distribution” tab there are two options to change the pervious fraction distribution: Either per LCZ using the “Separate LCZ’s” button or for all LCZ’s together using “Same for all LCZ’s”. When selecting the first option <strong>make sure to select the LCZ raster first</strong>. Based on the LCZ raster, the dropdown boxes will show the LCZ classes ordered by the frequency of occurrence. Select the classes to specify the pervious distributions for and select the most appropriate pervious land cover options and vegetation heights.</li>
<li>When choosing the “Same for all LCZ’s” option: choose the appropriate pervious land cover fractions and vegetation heights for all urban and all rural LCZ classes.</li>
</ul>
<div class="figure">
<img alt="_images/700px-LCZdialog1.png" src="_images/700px-LCZdialog1.png" />
</div>
<div class="figure">
<img alt="_images/700px-LCZdialog2.png" src="_images/700px-LCZdialog2.png" />
</div>
<div class="last figure">
<img alt="_images/700px-LCZdialog3.png" src="_images/700px-LCZdialog3.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections:</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>upper</td>
<td><div class="first last line-block">
<div class="line">Select the LCZ raster layer and the vector grid the land cover</div>
<div class="line">fractions should be computed for.</div>
</div>
</td>
</tr>
<tr class="row-even"><td>middle Tab: Pervious distribution</td>
<td><div class="first last line-block">
<div class="line">Set the distribution of pervious surface fractions for</div>
<div class="line">each LCZ separately or all at the same time.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>middle Tab: Table</td>
<td><div class="first last line-block">
<div class="line">Alters the land cover fractions and building and</div>
<div class="line">vegetation heights for each LCZ towards more accurate values.</div>
</div>
</td>
</tr>
<tr class="row-even"><td>lower</td>
<td>Specify output and run the calculations.</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>LCZ raster:</dt>
<dd><ul class="first last">
<li>Select the LCZ raster from the [WUDAPT database.](<a class="reference external" href="http://www.wudapt.org">http://www.wudapt.org</a>)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vector grid:</dt>
<dd><ul class="first last">
<li>Select your predefined polygon grid (see Vector  -&gt; Research Tools  -&gt; Vector Grid; select polygons not lines)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Adjust default parameters:</dt>
<dd><ul class="first last">
<li>Tick this box if you would like to edit the table below with the land use fractions and tree and building heights for each of the local climate zones.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Separate LCZ’s:</dt>
<dd><ul class="first last">
<li>Once selected it computes the most common LCZ classes in the Raster grid and allows you to alter the pervious fractions and tree heights in the dropdown boxes to the right for each individual LCZ.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>LCZ’s:</td>
<td><div class="first last line-block">
<div class="line">List of LCZ’s in the raster, ordered by most frequent occurrence.</div>
<div class="line">Select the LCZ(s) for which you would like to specify the pervious fraction.</div>
</div>
</td>
</tr>
<tr class="row-even"><td>Fraction distributions:</td>
<td>Select the percentages of each pervious land cover class for the selected LCZ.</td>
</tr>
<tr class="row-odd"><td>Height of trees:</td>
<td>Select the range of tree heights most applicable for that LCZ.</td>
</tr>
</tbody>
</table>
<blockquote>
<div>Note for rural classes you are only able to specify the distribution of tree species. For more detailed distribution of pervious fractions, please alter the table.</div></blockquote>
</div></blockquote>
<ul class="simple">
<li><dl class="first docutils">
<dt>Same for all LCZ’s:</dt>
<dd><ul class="first last">
<li>Allows you to alter the pervious fractions and tree heights for all urban and rural classes at the same time.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Urban:</td>
<td>Select the percentages of each pervious land cover class for all urban LCZ’s.</td>
</tr>
<tr class="row-even"><td>Rural:</td>
<td><div class="first last line-block">
<div class="line">Select the percentages of each pervious land cover class for all rural LCZ’s.</div>
<div class="line">Note for rural classes you are only able to specify the distribution of tree species.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>Height of trees:</td>
<td>Select the range of tree heights most applicable for the urban and rural LCZ’s.</td>
</tr>
</tbody>
</table>
<blockquote>
<div>For more detailed distribution of pervious fractions, please alter the table.</div></blockquote>
<ul class="simple">
<li><dl class="first docutils">
<dt>Update Table:</dt>
<dd><ul class="first last">
<li>This updates the table from the default values to the user-specified distributions of the pervious fractions. Please check the table, to make sure your changes have taken effect.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>File Prefix:</dt>
<dd><ul class="first last">
<li>A prefix that will be included in the beginning of the output files.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add results to polygon grid:</dt>
<dd><ul class="first last">
<li>Tick this in if you would like to save the results in the attribute table for your polygon vector grid.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last">
<li>A specified folder where result will be saved.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last">
<li>Starts the calculation</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Three files are saved after a successful run.</dt>
<dd><ul class="first last">
<li>One with the landcover fractions for each grid cell</li>
<li>One with the morphometric properties for the building for each grid cell</li>
<li>One with the morphometric properties for vegetation for each grid cell</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks:</dt>
<dd><ul class="first last">
<li>Rural LCZ’s are marked as 101, 102, etc instead of A, B, etc.</li>
<li>Issues using .sdat rasters has been reported. GeoTiffs are recommended.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References:</dt>
<dd><ul class="first last">
<li>Stewart, I.D. and Oke, T.R. 2012. Local Climate Zones for urban temperature studies. Bulletin of the American Meteorological Society, 93: <a class="reference external" href="http://journals.ametsoc.org/doi/abs/10.1175/BAMS-D-11-00019.1">1879-1900</a>.</li>
<li>Stewart, I.D., Oke, T.R., and E.S. Krayenhoff. 2014. Evaluation of the ‘local climate zone’ scheme using temperature observations and model simulations. International Journal of Climatology, 34: <a class="reference external" href="http://onlinelibrary.wiley.com/doi/10.1002/joc.3746/abstract">1062-80</a>.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-geometry-sky-view-factor-calculator">
<h2>Urban Geometry: Sky View Factor Calculator<a class="headerlink" href="#urban-geometry-sky-view-factor-calculator" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span> <span class="n">Sue</span> <span class="n">Grimmond</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The Sky View Factor plugin can be used to generate pixel wise sky view factor (SVF) using ground and building digital surface models (DSM). Optionally, vegetation DSMs could also be used. By definition, SVF is the ratio of the radiation received (or emitted) by a planar surface to the radiation emitted (or received) by the entire hemispheric environment (Watson and Johnson 1987). It is a dimensionless measure between zero and one, representing totally obstructed and free spaces, respectively. The methodology that is used to generate SVF here is described in Lindberg and Grimmond (2010).</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The Sky View Factor Calculator is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Geometry</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Sky View Factor</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog box:</dt>
<dd><div class="first last figure">
<img alt="_images/SVFCalculator.png" src="_images/SVFCalculator.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections:</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>top</td>
<td>Specify input data</td>
</tr>
<tr class="row-even"><td>bottom</td>
<td>Specify output data and run calculation</td>
</tr>
</tbody>
</table>
<ul>
<li><dl class="first docutils">
<dt>Building and Ground DSM:</dt>
<dd><ul class="first last simple">
<li>A DSM (geoTIFF) consisting of ground and building heights.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vegetation Canopy DSM:</dt>
<dd><ul class="first last simple">
<li>A DSM (geoTIFF) consisting of pixels with vegetation heights above ground. Pixels where no vegetation is present should be set to zero.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vegetation Trunk Zone DSM:</dt>
<dd><ul class="first last simple">
<li>A DSM (geoTIFF) consisting of pixels with vegetation trunk zone heights above ground. Pixels where no vegetation is present should be set to zero.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Use Vegetation DSMs:</dt>
<dd><ul class="first last simple">
<li>Tick this box if you want to include vegetation (trees and bushes) in the final SVF.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Trunk Zone DSM Exist:</dt>
<dd><ul class="first last simple">
<li>Tick this box if a trunk zone DSM already exists.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Transmissivity of Light Through Vegetation (%):</dt>
<dd><ul class="first last simple">
<li>Percentage of light that is penetrating through vegetation. The default value is set to 3 % according to Konarska et al. (2013).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Percentage of Canopy height:</dt>
<dd><ul class="first last simple">
<li>If a trunk zone vegetation DSM is absent, this can be generated based on the height of the Canopy DSM. The default percentage is set to 25%.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last simple">
<li>Specify folder where results will be saved.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last simple">
<li>Starts the calculations.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add Result to Project:</dt>
<dd><ul class="first last simple">
<li>If ticked, the total SVF raster will be added to the map canvas.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last simple">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first simple">
<li>16 files (geoTIFF) will be saved if vegetation DSM is used. Otherwise, 5 SVFs are saved.</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">File</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SkyViewFactor.tif</td>
<td>Total SVF, i.e. amount of sky that is seen from each pixel.</td>
</tr>
<tr class="row-odd"><td>SVF different directions</td>
<td>Four cardinal points</td>
</tr>
</tbody>
</table>
<div class="last line-block">
<div class="line">SVF different directions         | Four cardinal points                                                                                 |</div>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Example:</dt>
<dd><div class="first figure">
<img alt="_images/Output_Skyview.jpg" src="_images/Output_Skyview.jpg" />
</div>
<p class="last">Example of (left) input data - ground and building DSM (grayscale), DSM overlaid with a canopy DSM (yellow to green). Right: the resulting SVF -light highest SVF</p>
</dd>
</dl>
</li>
<li><p class="first">Remarks:</p>
<blockquote>
<div><ul class="simple">
<li>All DSMs need to have the same extent and pixel size.</li>
<li>This plugin is computationally intensive i.e. large grids will take a lot of time and very large grids will not be possible to use. Large grids e.g. larger than 4,000,000 pixels should be tiled before.</li>
</ul>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>References:</dt>
<dd><ul class="first last simple">
<li>Konarska J, Lindberg F, Larsson A, Thorsson S, Holmer B (2013). Transmissivity of solar radiation through crowns of single urban trees—application for outdoor thermal comfort modelling. <a class="reference external" href="http://link.springer.com/article/10.1007/s00704-013-1000-3">Theoret. Appl. Climatol., 1–14</a></li>
<li>Lindberg F, Grimmond CSB (2010) Continuous sky view factor maps from high resolution urban digital elevation models. <a class="reference external" href="http://www.int-res.com/abstracts/cr/v42/n3/p177-183/">Clim Res 42:177–183</a></li>
<li>Lindberg, F., Grimmond, C.S.B., 2011a. The influence of vegetation and building morphology on shadow patterns and mean radiant temperatures in urban areas: model development and evaluation. <a class="reference external" href="http://link.springer.com/article/10.1007/s00704-010-0382-8">Theoret. Appl. Climatol. 105, 311–323</a></li>
<li>Watson ID, Johnson GT (1987) Graphical estimation of skyview-factors in urban environments. <a class="reference external" href="http://onlinelibrary.wiley.com/doi/10.1002/joc.3370070210/abstract">J Climatol 7: 193–197</a></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-geometry-wall-height-and-aspect">
<h2>Urban Geometry: Wall Height and Aspect<a class="headerlink" href="#urban-geometry-wall-height-and-aspect" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><p class="first last">-The wall height and aspect pre-processor can be used to identify wall pixels and their height from ground and building digital surface models (DSM) by using a filter as presented by Lindberg et al. (2015a). Optionally, wall aspect can also be estimated using a specific linear filter as presented by Goodwin et al. (1999) and further developed by Lindberg et al. (2015b) to obtain the wall aspect. Wall aspect is given in degrees where a north facing wall pixel has a value of zero. The output of this plugin is used in other UMEP plugins such as SEBE (Solar Energy on Building Envelopes) and height to width ratio.</p>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The Wall Height and Aspect is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Geometry</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Wall Height and Aspect</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog box</dt>
<dd><div class="first last figure">
<img alt="_images/WallHeight.png" src="_images/WallHeight.png" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Building and Ground DSM:</dt>
<dd><ul class="first last simple">
<li>A DSM (geoTIFF) consisting of ground and building heights.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Calculate Wall Aspect:</dt>
<dd><ul class="first last simple">
<li>Tick this box if you want to include estimation and output of a wall aspect grid. This calculation is computational intensive and will make your computer work for a while (depending on the size of the input DSM).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Lower Limit for Wall Height (m):</dt>
<dd><ul class="first last simple">
<li>This limit gives the lowest height of a building wall.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output File for Wall Aspect Raster:</dt>
<dd><ul class="first last simple">
<li>Name of the output file of the aspect raster.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output File for Wall Height Raster:</dt>
<dd><ul class="first last simple">
<li>Name of the output file of the aspect raster.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last simple">
<li>Starts the calculations.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add Result to Project:</dt>
<dd><ul class="first last simple">
<li>If ticked, raster(s) will be added to the map canvas.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last simple">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first last simple">
<li>Two different files (geoTIFF) will be saved if wall aspect is calculated.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Example:</dt>
<dd><div class="first last figure">
<img alt="_images/Output_Wall_Height.jpg" src="_images/Output_Wall_Height.jpg" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks：</dt>
<dd><ul class="first last simple">
<li>This plugin make use of <strong>Scipy</strong> which in turn make use of <strong>Pillow</strong>. If this plugin is malfunctioning, try to install/reinstall these packages (see <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Adding_missing_Python_libraries_and_other_OSGeo_functionalities">here</a>).</li>
<li><strong>NOTE</strong>: The azimuth of the wall is estimated based on a 9 meter linear feature. This implies that coarser pixel resolution gives less pixels and thus a more imprecise measure of wall azimuth as the number of pixels will be lower. It it therefore recommended that use pixel resolution not greater than 2 meter in order to obtain a reasonable result.</li>
<li>Wall pixels will be located ‘inside’ of the building footprint.</li>
<li>The aspect algorithm gives reasonable result but improvements could be made by e.g. using a vector line layer which could be used to populate the wall pixels with aspect values.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References：</dt>
<dd><ul class="first last simple">
<li>Goodwin NR, Coops NC, Tooke TR, Christen A, Voogt JA (2009) Characterizing urban surface cover and structure with airborne lidar technology. <a class="reference external" href="http://www.tandfonline.com/doi/abs/10.5589/m09-015">Can J Remote Sens 35:297–309</a></li>
<li>Lindberg F., Jonsson, P. &amp; Honjo, T. and Wästberg, D. (2015) Solar energy on building envelopes - 3D modelling in a 2D environment <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S0038092X15001164">Solar Energy 115 369–378</a></li>
<li>Lindberg F., Grimmond, C.S.B. and Martilli, A. (2015) Sunlit fractions on urban facets - Impact of spatial resolution and approach <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S221209551400090X">Urban Climate DOI: 10.1016/j.uclim.2014.11.006</a></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-land-cover-land-cover-reclassifier">
<h2>Urban Land Cover: Land Cover Reclassifier<a class="headerlink" href="#urban-land-cover-land-cover-reclassifier" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first simple">
<li>The Land Cover Reclassifier is a simple plugin that can be used to create a UMEP land cover raster grid. The land cover fractions included in UMEP are:</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="25%" />
<col width="68%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>1</td>
<td>Paved</td>
<td>Paved surfaces (e.g. roads, car parks)</td>
</tr>
<tr class="row-even"><td>2</td>
<td>Buildings</td>
<td>Building surfaces</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>Evergreen Trees</td>
<td>Evergreen trees and shrubs</td>
</tr>
<tr class="row-even"><td>4</td>
<td>Deciduous Trees</td>
<td>Deciduous trees and shrubs</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>Grass</td>
<td>Grass surfaces</td>
</tr>
<tr class="row-even"><td>6</td>
<td>Bare soil</td>
<td>Bare soil surfaces and unmanaged land</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>Water</td>
<td>Open water (e.g. lakes, ponds, rivers, fountain)</td>
</tr>
</tbody>
</table>
<p class="last">It is not necessary to use this plugin to reclassify into a UMEP land cover dataset. This reclassification can also be done in other reclassification tools such a r.reclass in GRASS etc., just as long as the seven different land cover types is populated with the correct values (above).</p>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The Land Cover Reclassifier is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Land Cover</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Land Cover Reclassifier</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog box:</dt>
<dd><div class="first last figure">
<img alt="_images/landcoverreclassifier.png" src="_images/landcoverreclassifier.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections:</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>upper</td>
<td>Select raster land cover dataset to be reclassified into the UMEP land cover classes</td>
</tr>
<tr class="row-even"><td>middle</td>
<td><div class="first line-block">
<div class="line">Choose interval values to be classified into</div>
<div class="line">a certain UMEP land cover class.</div>
</div>
<ul class="last">
<li><div class="first line-block">
<div class="line">Not all lines and boxes need to be filled in, but multiple lines are available</div>
<div class="line">in case many different intervals are to be classified as the same land cover class.</div>
</div>
</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>lower</td>
<td>Specify the output file (.tiff) etc.</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>Input raster:</dt>
<dd><ul class="first last">
<li>Any valid raster dataset (float or integer) loaded into QGIS will appear in this dropdown list. Choose the one that includes your land cover information.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Land cover classes:</dt>
<dd><ul class="first last">
<li>Fill the interval values that you want to reclassify into a certain cover class. All values not included will appear as 0 in the output land cover raster. This should be avoided.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output file:</dt>
<dd><ul class="first last">
<li>Location and filename (geoTIFF) are specified here.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last">
<li>Starts the reclassification.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-land-cover-land-cover-fraction-point">
<h2>Urban Land Cover: Land Cover Fraction (Point)<a class="headerlink" href="#urban-land-cover-land-cover-fraction-point" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span> <span class="n">Niklas</span> <span class="n">Krave</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The Land Cover Fraction (Point) plugin calculates land cover fractions required for UMEP (see <a class="reference external" href="#Pre-Processor:_Urban_Land_Cover:_Land_Cover_Reclassifier">Land Cover Reclassifier</a>) from a point location based on a land cover raster grid.</li>
<li>A land cover grid suitable for the processor in UMEP can be derived using the Land Cover Classifier. The fraction will vary depending on what angle (wind direction) you are interested in. Thus, this plugin is able to derive the land cover fractions for different directions.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The Land Cover Fraction (Point) is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Land Cover</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Land Cover Fraction (Point)</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog box：</dt>
<dd><div class="first last figure">
<img alt="_images/Land_Cover_Reclass.png" src="_images/Land_Cover_Reclass.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog section：</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>upper</td>
<td>Select a point on the map canvas by either clicking a location or selecting an existing point from a point vector layer.</td>
</tr>
<tr class="row-even"><td>middle</td>
<td>Specify the area of interest where the morphometric parameters are calculated. Set the search interval in degrees.</td>
</tr>
<tr class="row-odd"><td>lower</td>
<td>Specify the input data regarding land cover fraction raster as well as specifying output and for running the calculations.</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>Select Point on Canvas  :</dt>
<dd><ul class="first last">
<li>Click to create a point from where the calculations will take place. When you click the button, the plugin will be disabled until you have clicked the map canvas.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Use Existing Single Point Vector Layer:</dt>
<dd><ul class="first last">
<li>Select if you want to use a point from a vector layer that already exists and is loaded to the QGIS-project. The Vector point layer drop down list will be enabled and include all point vector layers available.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Generate Study Area:</dt>
<dd><ul class="first last">
<li>This button is connected to the Search distance (m). When you click it, a circular polygon layer (Study area) is generated. This is the area that will be used to obtain the land cover fractions.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Wind Direction Search Interval (Degrees):</dt>
<dd><ul class="first last">
<li>This decides the interval in search directions for which the morphometric parameters will be calculated.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>UMEP Land Cover Grid:</dt>
<dd><ul class="first last">
<li>A integer raster land cover grid (e.g. geoTIFF) consisting of the various land covers specified above.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>File Prefix:</dt>
<dd><ul class="first last">
<li>A prefix that will be included in the beginning of the output files.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last">
<li>Where the result will be saved.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last">
<li>Starts the calculations.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Two different files are saved after a successful run.</dt>
<dd><ol class="first last arabic">
<li><strong>anisotropic</strong> results: land cover fractions for each wind direction as specified are included.</li>
<li><strong>isotropic</strong> results: all directions are integrated into one value for each land cover fraction.</li>
</ol>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-land-cover-land-cover-fraction-grid">
<h2>Urban Land Cover: Land Cover Fraction (Grid)<a class="headerlink" href="#urban-land-cover-land-cover-fraction-grid" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span> <span class="n">Niklas</span> <span class="n">Krave</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The Land Cover Fraction (Grid) plugin calculates land cover fractions required for UMEP (see <a class="reference external" href="#Urban_Land_Cover:_Land_Cover_Reclassifier">Land Cover Reclassifier</a>) from a point location based on a land cover raster grid. A land cover grid suitable for the processor in UMEP can be derived using the Land Cover Classifier. The fraction will vary depending on what angle (wind direction) you are interested in. Thus, this plugin is able to derive the land cover fractions for different directions. It is the same as the Land Cover Fraction (Point) except that this plugin calculates the fractions for each polygon object in polygon vector layer. The polygons should preferable be squares or any other regular shape. To create such a grid, built in functions in QGIS can be used (see <em>Vector -&gt; Research Tools -&gt; Vector Grid…</em>).   |</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The Land Cover Fraction (Grid) is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Morphology</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Land Cover Fraction (Grid)</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog Box:</dt>
<dd><div class="first last figure">
<img alt="_images/LandCoverFractionGrid2.png" src="_images/LandCoverFractionGrid2.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections：</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="95%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>upper</td>
<td><div class="first last line-block">
<div class="line">Sets the parameters for the area of interest where the fractions are calculated.</div>
<div class="line">You also set the search interval in degrees and from where the search should take place within each grid.</div>
</div>
</td>
</tr>
<tr class="row-even"><td>middle</td>
<td>Specifies the input data regarding polygon layer and the land cover raster grid that should be used.</td>
</tr>
<tr class="row-odd"><td>lower</td>
<td>Specifies output and runs the calculations.</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">lower    | Specifies output and runs the calculations.                                                                                                                                                  |</div>
</div>
<ul>
<li><dl class="first docutils">
<dt>Search Throughout the Grid Extent:</dt>
<dd><ul class="first simple">
<li>Select if the search should be performed from one side of the grid to the opposite side. Select the other option (Search from Grid Centroid) if the search should start from the centroid of the grid. Setting the <strong>Search distance</strong> can then allow for the search to extent beyond the grid. See the figure below for illustration. The left performs a search using the grid extent whereas the right illustrates a search from the centroid and extending outside of the grid.</li>
</ul>
<div class="last figure">
<img alt="_images/Grid_Extent.png" src="_images/Grid_Extent.png" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Wind Direction Search Interval (Degrees):</dt>
<dd><ul class="first last simple">
<li>This decides the interval in search directions for which the morphometric parameters will be calculated.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vector Polygon Grid:</dt>
<dd><ul class="first last simple">
<li>Here the grid polygon layer should be specified.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ID Field:</dt>
<dd><ul class="first last simple">
<li>Choose an attribute from the selected polygon layer that will be used to separate the different polygon objects from each other. An attribute field of unique numbers or letters should be used.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add results to polygon grid:</dt>
<dd><ul class="first last simple">
<li>Tick this in if you would like to save a isotropic results in the attribute table for your polygon vector grid.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>UMEP Land Cover Grid:</dt>
<dd><ul class="first last simple">
<li>An integer raster land cover grid (e.g. geoTIFF) consisting of the various land covers specified above.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>File Prefix:</dt>
<dd><ul class="first last simple">
<li>A prefix that will be included in the beginning of the output files.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Ignore NoData pixels:</dt>
<dd><ul class="first last simple">
<li>Tick this in if NoData pixels should be ignored and calculation of grid should be performed eventhough NoData pixels exists within that grid. Nodata pixels are set to bare soil (6).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last simple">
<li>A specified folder where result will be saved.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last simple">
<li>Starts the calculations.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last simple">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Two different files are saved after a successful run.</dt>
<dd><ol class="first last arabic">
<li><strong>anisotropic</strong> results: land cover fractions for each wind direction as specified are included.</li>
<li><strong>isotropic</strong> results: all directions are integrated into one value for each land cover fraction.</li>
</ol>
</dd>
</dl>
</li>
<li>If the raster data includes no data values within a polygon object, this grid will not be considered in the calculation.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks：</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Polygon grids must be squared (or rectangular) and allinged with the CRS used. This will be fixed in future versions so that any shaped grid can be used (see issue #12 in the <a class="reference external" href="https://bitbucket.org/fredrik_ucg/umep/issues">repository</a>).</dt>
<dd><div class="first last line-block">
<div class="line"><br /></div>
</div>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-morphology-morphometric-calculator-point">
<h2>Urban Morphology: Morphometric Calculator (Point)<a class="headerlink" href="#urban-morphology-morphometric-calculator-point" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>How to Cite：</dt>
<dd><ul class="first last simple">
<li>Kent et al. (2017a) unless you are including the impact of vegetation in the roughness calculations then your should cite Kent et al. (2017b).</li>
<li>Kent CW, CSB Grimmond, J Barlow, D Gatey, S Kotthaus, F Lindberg, CH Halios 2017: Evaluation of urban local-scale aerodynamic parameters: implications for the vertical profile of wind and source areas Boundary Layer Meteorology 164 183–213 doi: [10.1007/s10546-017-0248-z <a class="reference external" href="https://link.springer.com/article/10.1007/s10546-017-0248-z">https://link.springer.com/article/10.1007/s10546-017-0248-z</a>]</li>
<li>Kent CW, S Grimmond, D Gatey Aerodynamic roughness parameters in cities: inclusion of vegetation Journal of Wind Engineering &amp; Industrial Aerodynamics <a class="reference external" href="http://dx.doi.org/10.1016/j.jweia.2017.07.016">http://dx.doi.org/10.1016/j.jweia.2017.07.016</a></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span> <span class="n">Christoph</span> <span class="n">Kent</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span>
<span class="n">Brian</span> <span class="n">Offerle</span> <span class="p">(</span><span class="n">previously</span> <span class="n">Indiana</span> <span class="n">University</span><span class="p">;</span> <span class="n">Tyrens</span><span class="p">),</span>
<span class="n">Sue</span> <span class="n">Grimmond</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Niklas</span> <span class="n">Krave</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first simple">
<li>The Morphometric Calculator (Point) plugin calculates various morphometric parameters based on digital surface models. These morphometric parameters are used to describe the roughness of a surface and are included in various local and mesoscale climate models (e.g. Grimmond and Oke 1999). They may vary depending on what angle (wind direction) you are interested in. Thus, this plugin is able to derive the parameters for different directions. Preferably, a ground and 3D-object DSM and DEM should be used as input data. The 3D objects are usually buildings but can also be 3D vegetation (i.e. trees and bushes). It is also possible to derive the parameters from a 3D object DSM with no ground heights.</li>
</ul>
<table border="1" class="last docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Morphometric parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Mean building height (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">H</span></code>)</td>
<td>Average building height measured from ground level [m].</td>
</tr>
<tr class="row-odd"><td>Standard deviation of building heights (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">Hσ</span></code>).</td>
<td>Standard deviation of building heights [m].</td>
</tr>
<tr class="row-even"><td>Maximum building height (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">Hmax</span></code>).</td>
<td>Height of the tallest building within the study area [m]</td>
</tr>
<tr class="row-odd"><td>Plan area index (λ:sub:<code class="xref any docutils literal notranslate"><span class="pre">P</span></code>)</td>
<td>Area of building surfaces relative to the total ground area.</td>
</tr>
<tr class="row-even"><td>Frontal area index (λ:sub:<code class="xref any docutils literal notranslate"><span class="pre">F</span></code>)</td>
<td>Area of building walls normal to wind direction relative to the total ground area.</td>
</tr>
<tr class="row-odd"><td>Roughness length (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">0</span></code>)</td>
<td>A parameter of some vertical wind profile equations that model the horizontal mean wind speed near the ground; in the log wind profile, it is equivalent to the height at which the wind speed theoretically becomes zero [m].</td>
</tr>
<tr class="row-even"><td>Zero-plane displacement height (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">d</span></code>)</td>
<td>Height above ground where the wind speed is 0 m s<sup>-1</sup> as a result of obstacles to the flow such as trees or buildings [m].</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The Morphometric Calculator (Point) is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Morphology</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Morphometric Parameters (Point)</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog box:</dt>
<dd><div class="first last figure">
<img alt="_images/Morph_Calc_point.png" src="_images/Morph_Calc_point.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections：</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>upper</td>
<td>Select a point on the map canvas by either clicking at a location or by selecting an existing point from a point vector layer.</td>
</tr>
<tr class="row-even"><td>middle upper</td>
<td><ul class="first last simple">
<li>Set the parameters for the area of interest where the morphometric parameters are calculated.</li>
<li>Set the search interval in degrees.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>middle lower</td>
<td>Specify the input data regarding buildings and ground.</td>
</tr>
<tr class="row-even"><td>lower</td>
<td>Specify output and run the calculations.</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>Select Point on Canvas:</dt>
<dd><ul class="first last">
<li>Click on this button to create a point from where the calculations will take place. When you click button, the plugin will be disabled until you have clicked the map canvas.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Use Existing Single Point Vector Layer:</dt>
<dd><ul class="first last">
<li>Select if you want to use a point from a vector layer that already exist and are loaded to the QGIS-project. The Vector point layer dropdown list will be enabled and include all point vector layer available.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Generate Study Area:</dt>
<dd><ul class="first last">
<li>This button is connected to the Search distance (m) and when you click the button a circular polygon layer (Study area) is generated. This is the area that will be used to obtain the morphometric parameters.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Wind Direction Search Interval (Degrees):</dt>
<dd><ul class="first last">
<li>This decides the interval in search directions for which the morphometric parameters will be calculated.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DSM (only Building or Vegetation) Exist:</dt>
<dd><ul class="first last">
<li>Select if a 3D-object DSM without ground heights is available. 3D objects (e.g. buildings) should be metres above ground.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DSM (3D Object and Ground):</dt>
<dd><ul class="first last">
<li>A raster DSM (e.g. geoTIFF) consisting of ground and e.g. building height (meters above sea level).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DEM (only Ground):</dt>
<dd><ul class="first last">
<li>A DEM (e.g. geoTIFF) consisting of pixels with ground heights (metres above sea level).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DSM (only 3D Objects):</dt>
<dd><ul class="first last">
<li>A DSM (e.g. geoTIFF) consisting of pixels with object (e.g. buildings or vegetation) heights above ground. Pixels where no objects are present should be set to zero.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Roughness Calculation Method:</dt>
<dd><ul class="first last">
<li>Options to choose methods for roughness calculations regarding zero displacement height (zd) and roughness length (z0) are available.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>File Prefix:</dt>
<dd><ul class="first last">
<li>A prefix that will be included in the beginning of the output files.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last">
<li>A specified folder where result will be saved.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last">
<li>Starts the calculation</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Two different files are saved after a successful run.</dt>
<dd><ol class="first last arabic">
<li><strong>Anisotropic</strong> result where the morphometric parameters for each wind direction as selected are included.</li>
<li><strong>Isotropic</strong> results where all directions are integrated into one value for each parameter.</li>
</ol>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks:</dt>
<dd><ul class="first last">
<li>All DSMs need to have the same extent and pixel size.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References:</dt>
<dd><ul class="first last">
<li>Grimmond CSB and Oke TR (1999) Aerodynamic properties of urban areas derived from analysis of surface form. <a class="reference external" href="http://journals.ametsoc.org/doi/abs/10.1175/1520-0450(1999)038%3C1262%3AAPOUAD%3E2.0.CO%3B2">J Appl Meteorol 38: 1262-1292</a></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-morphology-morphometric-calculator-grid">
<h2>Urban Morphology: Morphometric Calculator (Grid)<a class="headerlink" href="#urban-morphology-morphometric-calculator-grid" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>How to Cite：</dt>
<dd><ul class="first last simple">
<li>Kent et al. (2017a) unless you are including the impact of vegetation in the roughness calculations then your should cite Kent et al. (2017b).</li>
<li>Kent CW, CSB Grimmond, J Barlow, D Gatey, S Kotthaus, F Lindberg, CH Halios 2017: Evaluation of urban local-scale aerodynamic parameters: implications for the vertical profile of wind and source areas Boundary Layer Meteorology 164 183–213 doi: [10.1007/s10546-017-0248-z <a class="reference external" href="https://link.springer.com/article/10.1007/s10546-017-0248-z">https://link.springer.com/article/10.1007/s10546-017-0248-z</a>]</li>
<li>Kent CW, S Grimmond, D Gatey Aerodynamic roughness parameters in cities: inclusion of vegetation Journal of Wind Engineering &amp; Industrial Aerodynamics <a class="reference external" href="http://dx.doi.org/10.1016/j.jweia.2017.07.016">http://dx.doi.org/10.1016/j.jweia.2017.07.016</a></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Christoph</span> <span class="n">Kent</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span>
<span class="n">Brian</span> <span class="n">Offerle</span> <span class="p">(</span><span class="n">previously</span> <span class="n">Indiana</span> <span class="n">University</span><span class="p">;</span> <span class="n">Tyrens</span><span class="p">),</span>
<span class="n">Sue</span> <span class="n">Grimmond</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Niklas</span> <span class="n">Krave</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The Morphometric Calculator (Grid) pre-processor calculates various morphometric parameters based on digital surface models.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<blockquote>
<div><ul>
<li><p class="first">Location:
- The Morphometric Calculator (Grid) is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Morphology</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Morphometric Calculator (Grid)</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<ul>
<li><dl class="first docutils">
<dt>Dialog box：</dt>
<dd><div class="first last figure">
<img alt="_images/Morph_Calc.png" src="_images/Morph_Calc.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections：</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>upper</td>
<td><p class="first">Specifies the area of interest where the morphometric parameters are calculated.</p>
<ul class="last simple">
<li>Set the search interval in degrees and from where the search should take place within each grid.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>middle</td>
<td>Specifies the input data regarding 3D objects and ground as well as specifying what grid that should be used.</td>
</tr>
<tr class="row-odd"><td>lower</td>
<td>Specifies output and runs the calculations.</td>
</tr>
</tbody>
</table>
<ul>
<li><dl class="first docutils">
<dt>Search Throughout the Grid Extent:</dt>
<dd><ul class="first simple">
<li>Select if the search should be performed from one side of the grid to the opposite side.</li>
<li>Select the other option (Search from Grid Centroid if the search should start from the centroid of the grid. Setting the <strong>Search distance</strong> can then allow for the search to extent beyond the grid. See the figure below for illustration. The left one performs a search using the grid extent whereas the right illustrates a search from the centroid and extending outside of the grid.</li>
</ul>
<div class="last figure">
<img alt="_images/Grid_Extent.png" src="_images/Grid_Extent.png" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Wind Direction Search Interval (degrees):</dt>
<dd><ul class="first last simple">
<li>This decides the interval in search directions for which the morphometric parameters will be calculated.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vector Polygon Grid:</dt>
<dd><ul class="first last simple">
<li>Here the grid polygon layer should be specified.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ID Field:</dt>
<dd><ul class="first last simple">
<li>Choose an attribute from the selected polygon layer that will be used to separated the different polygon objects from each other. An attribute field of unique numbers or letters should be used.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add results to polygon grid:</dt>
<dd><ul class="first last simple">
<li>Tick this in if you would like to save a isotropic results in the attribute table for your polygon vector grid.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DSM (only 3D Objects) Exist:</dt>
<dd><ul class="first last simple">
<li>Tick this in if a 3D-object DSM without ground heights is available. 3D objects (e.g. buildings) should be metres above ground.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DSM (3D Objects and Ground):</dt>
<dd><ul class="first last simple">
<li>A raster DSM (e.g. geoTIFF) consisting of ground and e.g. building height (metres above sea level).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DEM (only Ground):</dt>
<dd><ul class="first last simple">
<li>A DEM (e.g. geoTIFF) consisting of pixels with ground heights (metres above sea level).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DSM (only 3D Objects):</dt>
<dd><ul class="first last simple">
<li>A DSM (e.g. geoTIFF) consisting of pixels with object (e.g. buildings or vegetation) heights above ground. Pixels where no objects are present should be set to zero.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Roughness calculation Method:</dt>
<dd><ul class="first last simple">
<li>Options to choose methods for roughness calculations regarding zero-plane displacement height (zd) and roughness length (z0) are available.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>File Prefix:</dt>
<dd><ul class="first last simple">
<li>A prefix that will be included in the beginning of the output files.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Ignore NoData pixels:</dt>
<dd><ul class="first last simple">
<li>Tick this in if NoData pixels should be ignored and calculation of grid should be performed eventhough NoData pixels exists within that grid. Nodata pixels are set to the average pixel values of the DEM.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last simple">
<li>A specified folder where result will be saved.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last simple">
<li>Starts the calculations</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last simple">
<li>Closes the plugin</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Two different files are saved after a successful run.</dt>
<dd><ol class="first last arabic">
<li><strong>Anisotropic</strong> result where the morphometric parameters for each wind direction as selected are included.</li>
<li><strong>Isotropic</strong> results where all directions are integrated into one value for each parameter.</li>
</ol>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks:</dt>
<dd><ul class="first last simple">
<li>All DSMs need to have the same extent and pixel size.</li>
<li>Polygon grids must be squared (or rectangular) and allinged with the CRS used. This will be fixed in future versions so that any shaped grid can be used (see issue #12 in the <a class="reference external" href="https://bitbucket.org/fredrik_ucg/umep/issues">repository</a>).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References:</dt>
<dd><ul class="first last simple">
<li>Grimmond CSB and Oke TR (1999) Aerodynamic properties of urban areas derived from analysis of surface form. <a class="reference external" href="http://journals.ametsoc.org/doi/abs/10.1175/1520-0450(1999)038%3C1262%3AAPOUAD%3E2.0.CO%3B2">J Appl Meteorol 38: 1262-1292</a></li>
<li>Kent CW, CSB Grimmond, J Barlow, D Gatey, S Kotthaus, F Lindberg, CH Halios 2017: Evaluation of urban local-scale aerodynamic parameters: implications for the vertical profile of wind and source areas Boundary Layer Meteorology 164 183–213 <a class="reference external" href="https://link.springer.com/article/10.1007/s10546-017-0248-z">doi: 10.1007/s10546-017-0248-z</a></li>
<li>Kent CW, S Grimmond, D Gatey Aerodynamic roughness parameters in cities: inclusion of vegetation Journal of Wind Engineering &amp; Industrial Aerodynamics <a class="reference external" href="http://dx.doi.org/10.1016/j.jweia.2017.07.016">http://dx.doi.org/10.1016/j.jweia.2017.07.016</a></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-morphology-source-area-point">
<h2>Urban Morphology: Source Area (Point)<a class="headerlink" href="#urban-morphology-source-area-point" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>How to Cite：</dt>
<dd><ul class="first last simple">
<li>Kent et al. (2017a) unless you are including the impact of vegetation in the roughness calculations then your should cite Kent et al. (2017b).</li>
<li>Kent CW, CSB Grimmond, J Barlow, D Gatey, S Kotthaus, F Lindberg, CH Halios 2017: Evaluation of urban local-scale aerodynamic parameters: implications for the vertical profile of wind and source areas Boundary Layer Meteorology 164 183–213 doi: [10.1007/s10546-017-0248-z <a class="reference external" href="https://link.springer.com/article/10.1007/s10546-017-0248-z">https://link.springer.com/article/10.1007/s10546-017-0248-z</a>]</li>
<li>Kent CW, S Grimmond, D Gatey Aerodynamic roughness parameters in cities: inclusion of vegetation Journal of Wind Engineering &amp; Industrial Aerodynamics <a class="reference external" href="http://dx.doi.org/10.1016/j.jweia.2017.07.016">http://dx.doi.org/10.1016/j.jweia.2017.07.016</a></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Christoph</span> <span class="n">Kent</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span>
<span class="n">Kormann</span> <span class="ow">and</span> <span class="n">Mexiner</span> <span class="p">(</span><span class="mi">2001</span><span class="p">),</span> <span class="n">Kljun</span> <span class="n">et</span> <span class="n">al</span><span class="o">.</span> <span class="p">(</span><span class="mi">2015</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The Source Area or <em>Footprint Model</em> plugin calculates various morphometric parameters based on digital surface models and source area calculations. Footprint models can be used to determine the likely position and influence of the surface area which is contributing to a turbulent flux measurement at a specific point in time and space with imposed boundary conditions (e.g. meteorological conditions, sources/sinks of passive scalars or surface characteristics). The principle of footprint models is that the measured flux is the integral of all contributing surface elements, with a ‘footprint function’ describing the relative fractional contribution of a discretisized area.                                                                                                                                        |</li>
<li>Two footprint models exit in UMEP: (i) the Kormann and Meixner (2001) analytical footprint model; (ii) Kljun et al. (2015).</li>
<li>The mathematical basis of Kormann and Meixner (2001) includes a stationary gradient diffusion formulation, height independent cross-wind dispersion, power law profiles of mean wind velocity and eddy diffusivity and a power law solution of the two-dimensional advection-diffusion equation. The final solution of the footprint function is calculated by fitting the power laws (mean wind and eddy diffusivity) to Monin-Obukhov similarity profiles. As with all models the limitations should be appreciated which include (but are not limited to) assumptions of Monin-Obukhov similarity theory, the use of power law profiles, assumptions of horizontally homogeneous flow and assumptions of stationarity during the meteorological or scalar variable input period (i.e. their averaging period; typically 30 – 60 minutes).   |</li>
<li>Two footprint models exit in UMEP: (i) the Kormann and Meixner (2001) analytical footprint model; (ii) Kljun et al.</li>
<li>Kljun et al. (2015) is a two-dimensional parameterisation for flux-footprint prediction which builds upon the footprint parameterisation of Kljun et al. (2004b) by providing the width and shape of footprint estimates, as well as explicitly considering surface roughness length. It is developed and evaluated from simulations of the backward Lagrangian stochastic particle dispersion model LPDM-B (Kljun et al., 2002) and demonstrated to be appropriate for a wide range of boundary layer conditions and measurement heights. It can therefore provide footprint estimates for a wide range of real-case applications.</li>
<li>When using pre-determined values of z<sub>d</sub> and z<sub>0</sub>, the horizontal wind speed is calculated internally to the respective source area models. This ensures the boundary layer equations used within the models are internally consistent.</li>
<li>A ground and 3D object DSM and a DEM should be used as input data. In addition if vegetation heights above ground level (i.e. trees and bushes) are available (CDSM) this can also be used. However, a CDSM need not be used and it is also possible to only use a 3D object DSM with no ground heights.</li>
<li>Note that the source area calculations are for one iteration. For the determination of roughness parameters, several iterations are recommended until the values converge (see Kent et al. 2017a).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Tutorial Available ：</dt>
<dd><ul class="first last simple">
<li>yes</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The pre-processor Footprint Model (Point) is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Pre-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Morphology</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Image Morphometric Parameters (Point)</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog box：</dt>
<dd><div class="first last figure">
<img alt="_images/Footprint.png" src="_images/Footprint.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections：</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>upper</td>
<td>Select a point on the map canvas by either clicking at a location or by selecting an existing point from a point vector layer.</td>
</tr>
<tr class="row-even"><td>middle upper</td>
<td><ul class="first last simple">
<li>Select if only buildings or both buildings and ground heights are available.</li>
<li>Specify the input data for buildings and ground.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>middle upper 2</td>
<td><ul class="first last simple">
<li>Select if vegetation heights are available.</li>
<li>Specify the input data for buildings and ground.</li>
<li>Specify porosity (%) of vegetation (0% is impermeable, 100 % is fully porous)</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>middle lower</td>
<td>Select input parameters to source area model: specify if a file is used, or values from the dialog box.</td>
</tr>
<tr class="row-odd"><td>lower</td>
<td>Specify output options and run calculations.</td>
</tr>
</tbody>
</table>
<ul>
<li><dl class="first docutils">
<dt>Select Point on Canvas：</dt>
<dd><ul class="first last simple">
<li>To create a point for where the calculations will take place. When you click the button, the plugin will be disabled until you have clicked the map canvas.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Use Existing Single Point Vector Layer：</dt>
<dd><ul class="first last simple">
<li>Select if you want to use a point from a vector layer that already exist and is loaded in the QGIS-project. The Vector point layer dropdown list will be enabled and include all point vector layer available.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DSM (only Building) Exist：</dt>
<dd><ul class="first last simple">
<li>Select if a 3D-object DSM without ground heights is available. 3D objects (e.g. buildings) should be metres above ground.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DSM (3D Objects and Ground)：</dt>
<dd><ul class="first last simple">
<li>A raster DSM (e.g. geoTIFF) consisting of ground and e.g. building height (metres above sea level).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Raster DEM (only Ground)：</dt>
<dd><ul class="first last simple">
<li>A DEM (e.g. geoTIFF) consisting of pixels with ground heights (metres above sea level).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vegetation Canopy DSM:</dt>
<dd><ul class="first last simple">
<li>A CDSM (e.g. geoTIFF) consisting of pixels with vegetation heights above ground. Pixels where no objects are present should be set to zero.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Use Input File on Specify Input Parameters:</dt>
<dd><ul class="first">
<li><p class="first">An input text file (.txt or .csv) containing the required inputs to the model (see below) with associated time stamps. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iy</span> <span class="nb">id</span> <span class="n">it</span> <span class="n">imin</span> <span class="n">z_0_input</span> <span class="n">z_d_input</span> <span class="n">z_m_input</span> <span class="n">sigv</span> <span class="n">Obukhov</span> <span class="n">ustar</span> <span class="nb">dir</span> <span class="n">h</span> <span class="n">por</span>
<span class="mi">2014</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.1671</span> <span class="mf">8.1697</span> <span class="mf">50.3</span> <span class="mf">1.4805</span> <span class="o">-</span><span class="mf">5457.9644</span> <span class="mf">0.8460</span> <span class="mf">193.8650</span> <span class="mf">1000.0000</span> <span class="mf">60.0000</span>
<span class="mi">2014</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">30</span> <span class="mf">1.4007</span> <span class="mf">9.8050</span> <span class="mf">50.3</span> <span class="mf">0.9616</span> <span class="mf">1081.7260</span> <span class="mf">0.5046</span> <span class="mf">185.5874</span> <span class="mf">1000.0000</span> <span class="mf">60.0000</span>
<span class="mi">2014</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mf">1.3738</span> <span class="mf">9.6168</span> <span class="mf">50.3</span> <span class="mf">0.9870</span> <span class="mf">854.9901</span> <span class="mf">0.4849</span> <span class="mf">189.0444</span> <span class="mf">1000.0000</span> <span class="mf">60.0000</span>
<span class="mi">2014</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">30</span> <span class="mf">1.2768</span> <span class="mf">9.3872</span> <span class="mf">50.3</span> <span class="mf">1.2345</span> <span class="mf">1002.2290</span> <span class="mf">0.5876</span> <span class="mf">202.3300</span> <span class="mf">1000.0000</span> <span class="mf">60.0000</span>

<span class="p">[</span><span class="n">Header</span><span class="p">:</span> <span class="n">year</span><span class="p">,</span> <span class="n">day</span> <span class="n">of</span> <span class="n">year</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">minutes</span> <span class="n">of</span> <span class="n">averaging</span> <span class="n">period</span><span class="p">,</span> <span class="n">roughness</span> <span class="n">length</span> <span class="k">for</span>
<span class="n">momentum</span><span class="p">,</span><span class="n">zero</span> <span class="n">plane</span> <span class="n">displacement</span> <span class="n">height</span> <span class="k">for</span> <span class="n">momentum</span><span class="p">,</span> <span class="n">measurement</span> <span class="n">height</span> <span class="n">of</span> <span class="n">sensor</span><span class="p">,</span>
<span class="n">standard</span> <span class="n">deviation</span> <span class="n">of</span> <span class="n">lateral</span> <span class="n">wind</span><span class="p">,</span><span class="n">Obukhov</span> <span class="n">length</span><span class="p">,</span> <span class="n">friction</span> <span class="n">velocity</span><span class="p">,</span> <span class="n">wind</span> <span class="n">direction</span><span class="p">,</span>
<span class="n">boundary</span> <span class="n">layer</span> <span class="n">height</span><span class="p">,</span> <span class="n">vegetation</span> <span class="n">porosity</span><span class="p">]</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ul>
<p class="last">Note In this example, the measurement height of the sensor (z_m_input) is 50.3</p>
</dd>
</dl>
</li>
<li><p class="first">Conditions for analysis:</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter/Variable</th>
<th class="head">Defintion</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Roughness Length for Momentum</td>
<td>First order estimation of roughness length for momentum (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">0</span></code>) for this wind direction [m].</td>
</tr>
<tr class="row-odd"><td>Zero Displacement Height for Momentum</td>
<td>First order estimation of the zero-plane displacement height for momentum (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">d</span></code>) for this wind direction. [m].</td>
</tr>
<tr class="row-even"><td>Measurement Height</td>
<td>Height of sensor above ground level [m].</td>
</tr>
<tr class="row-odd"><td>Standard Deviation (sigma) of Cross Wind</td>
<td>Standard deviation of the wind in the y direction (lateral wind) [m s<sup>-1</sup>].</td>
</tr>
<tr class="row-even"><td>Obukhov Length</td>
<td>Indication of atmospheric stability for use in Monin-Obukhov similarity theory [m].</td>
</tr>
<tr class="row-odd"><td>Friction Velocity</td>
<td>Shear stress represented in units of velocity for non-dimensional scaling [m s<sup>-1</sup>].</td>
</tr>
<tr class="row-even"><td>Wind Direction</td>
<td>Prevailing wind direction during averaging period [degrees].</td>
</tr>
<tr class="row-odd"><td>Boundary layer height</td>
<td>Height of planetary boundary layer during averaging period [m].</td>
</tr>
<tr class="row-even"><td>Vegetation porosity</td>
<td>Aerodynamic porosity of vegetation, 0% is impermeable, 100 % is fully porous [%].</td>
</tr>
<tr class="row-odd"><td>Maximum Fetch Considered in metres</td>
<td>The furthest distance upwind considered in the calculation of the footprint function [m].</td>
</tr>
</tbody>
</table>
<ul>
<li><dl class="first docutils">
<dt>Footprint model:</dt>
<dd><ul class="first last simple">
<li>Specify the footprint model to use: Kormann and Meixner (2001) or Kljun et al. (2015)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Roughness Calculation Method:</dt>
<dd><ul class="first simple">
<li>Here, options to choose methods for roughness calculations regarding zero displacement height (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">d</span></code>) and roughness length (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">0</span></code>) are available.</li>
</ul>
<table border="1" class="colwidths-given last docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>RT</td>
<td>Rule of thumb (c.f. Grimmond and Oke 1998)</td>
</tr>
<tr class="row-even"><td>Rau</td>
<td>Raupach (1994)</td>
</tr>
<tr class="row-odd"><td>Bot</td>
<td>Bottema (1998)</td>
</tr>
<tr class="row-even"><td>Mac</td>
<td>MacDonald et al. (1998)</td>
</tr>
<tr class="row-odd"><td>Mho</td>
<td>Millward-Hopkins et al. (2011)</td>
</tr>
<tr class="row-even"><td>Kan</td>
<td>Kanda et al. (2013)</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>File Prefix:</dt>
<dd><ul class="first last simple">
<li>A prefix that will be included in the beginning of the output files.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last simple">
<li>A specified folder where result will be saved.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last simple">
<li>Starts the calculations.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last simple">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output：</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Two different outputs are generated:</dt>
<dd><ol class="first last arabic">
<li><p class="first">A raster grid which represents the fractional contribution of each
pixel in the array to turbulent fluxes measured at the sensor (i.e.
the footprint function). Each pixel of this grid will be of the same
order to the input grid. Because the user can determine the maximum
fetch extent that is considered, each pixel in the footprint function
is weighted as a percentage of the pixel of maximum contribution. If
the footprint model is set to run for more than one time period (i.e.
integrated over time), the footprint functions are summed and
weighted as a percentage of the pixel of maximum contribution.</p>
</li>
<li><p class="first">A text file which specifies the time dimensions of measurements, the
initial aerodynamic and meteorological parameters which were input to
the model and finally the weighted geometry in the footprint and thus
the newly calculated roughness length (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">0</span></code>) and displacement
height (z:sub:<code class="xref any docutils literal notranslate"><span class="pre">d</span></code>) according to the user specified method. This is of
the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>“iy id it imin z_0_input z_d_input z_m_input sigv Obukhov
 ustar dir fai pai zH zMax zSdev zd z0”

 [Header: year, day of year, hour, minutes of averaging period,
  roughness length for momentum, zero plane displacement height
  for momentum, measurement height of sensor, standard deviation
  of lateral wind, Obukhov length, friction velocity, wind direction,
  building frontal area weighted according to footprint function,
  building plan area weighted according to footprint, average height
  of buildings weighted according to footprint, maximum building height,
  standard deviation of building heights, footprint specific displacement
  height for specified method, footprint specific roughness length for
  specified method]
</pre></div>
</div>
</li>
</ol>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks：</dt>
<dd><ul class="first last">
<li><p class="first">All DSMs need to have the same extent and pixel size.</p>
</li>
<li><p class="first">Make certain that have set the projection correctly
- After you haved opened the the GeoTiff files (in a new project), right click on the layer name</p>
<blockquote>
<div><ul class="simple">
<li>Set Project CRS from this layer
- Now you are ready to start adding the source areas to the image.</li>
</ul>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References：</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Footprint Model</dt>
<dd><ul class="first last">
<li>Kormann R and Meixner FX (2001) An analytical footprint model for
non-neutral stratification. <a class="reference external" href="http://link.springer.com/article/10.1023/A:1018991015119">Bound-Layer Meteorol, 99,
207-224</a>.</li>
<li>Kljun N, Calanca P, Rotach MW, Schmid HP (2015) A simple
two-dimensional parameterisation for Flux Footprint Prediction (FFP).
<a class="reference external" href="http://www.geosci-model-dev.net/8/3695/2015/gmd-8-3695-2015.html">Geoscientific Model
Development.8(11):3695-713</a>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Roughness Calculations</dt>
<dd><ul class="first last">
<li>Bottema M and Mestayer PG (1997) Urban roughness mapping–validation
techniques and some first results. <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S0167610598000142">J Wind Eng Ind Aerodyn, 74,
163-173</a>.</li>
<li>Grimmond CSB and Oke TR (1999) Aerodynamic properties of urban areas
derived from analysis of surface form. <a class="reference external" href="http://journals.ametsoc.org/doi/abs/10.1175/1520-0450(1999)038%3C1262%3AAPOUAD%3E2.0.CO%3B2">J Appl Meteorol, 38,
1262-1292</a>.</li>
<li>Kanda M, Inagaki A, Miyamoto T, Gryschka M and Raasch S (2013) A new
aerodynamic parametrization for real urban surfaces. <a class="reference external" href="http://link.springer.com/article/10.1007/s10546-013-9818-x">Bound-Layer
Meteorol, 148,
357-377</a>.</li>
<li>Macdonald R, Griffiths R and Hall D (1998) An improved method for the
estimation of surface roughness of obstacle arrays. <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S1352231097004032">Atmos Environ,
32,
1857-1864</a>.</li>
<li>Millward-Hopkins J, Tomlin A, Ma L, Ingham D and Pourkashanian M
(2011) Estimating aerodynamic parameters of urban-like surfaces with
heterogeneous building heights. <a class="reference external" href="http://link.springer.com/article/10.1007%2Fs10546-011-9640-2">Bound-Layer Meteorol, 141,
443-465</a>.</li>
<li>Raupach M (1994) Simplified expressions for vegetation roughness
length and zero-plane displacement as functions of canopy height and
area index. <a class="reference external" href="http://link.springer.com/article/10.1007%2FBF00709229">Bound-Layer Meteorol, 71,
211-216</a>.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="suews-prepare">
<h2>SUEWS Prepare<a class="headerlink" href="#suews-prepare" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Niklas</span> <span class="n">Krave</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span> <span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span>
<span class="n">Frans</span> <span class="n">Olofson</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span> <span class="n">Sue</span> <span class="n">Grimmond</span> <span class="p">(</span><span class="n">Reading</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The pre-processor SUEWS Prepare generates surface-related input data from geographical data for <a class="reference external" href="http://urban-climate.net/umep/SUEWS">SUEWS</a>, the Surface Urban Energy and Water Balance Scheme. SUEWS (Järvi et al. 2011, 2014; Ward et al. 2016a, b) simulates the urban radiation, energy and water balances using commonly measured/modelled meteorological variables and information about the surface cover. It utilizes an evaporation-interception approach (Grimmond et al. 1991), similar to that used in forests, to model evaporation from urban surfaces. The surface state for each surface type at each time step is calculated from the running water balance of the canopy where the evaporation is calculated from the Penman-Monteith equation. The soil moisture below each surface type (excluding water) is also taken into account.   |</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Terminology</strong> ：</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Components of the plugin window:</dt>
<dd><div class="first figure">
<img alt="_images/SuewsPrepareTerminology.jpg" src="_images/SuewsPrepareTerminology.jpg" />
</div>
<p class="last">Some naming conventions used in this document relating to the components of the plugin.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Plugin window:</dt>
<dd><ul class="first last simple">
<li>Dialog window of the plugin. Any user interface components that are part of the plugin will be a part of the plugin window.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Tab:</dt>
<dd><ul class="first last simple">
<li>The plugin contains many tabs. The tabs can be cycled through to reveal different kinds of information.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Widget:</dt>
<dd><ul class="first last simple">
<li>One tab can contain one or more widgets. One widget contains two boxes, the selection box and the variable box.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Variable box:</dt>
<dd><ul class="first last simple">
<li>Right part of a widget It contains a number of variables. One variable is comprised of a variable title and a variable text box.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Variable title:</dt>
<dd><ul class="first last simple">
<li>The variable title is a short description of the variable.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Variable text box:</dt>
<dd><ul class="first last simple">
<li>The variable text box contains the value of the variable for one site entry.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Selection box:</dt>
<dd><ul class="first last simple">
<li>The selection box is the left part of a widget. It contains a number of user interface components such as buttons and drop down menus.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Drop down menu:</dt>
<dd><ul class="first last simple">
<li>The drop down menu allows a selection from a predetermined range of values.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Terms relating to data used by the plugin</strong> (For more info see developer section below)：</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Site Library:</dt>
<dd><ul class="first last">
<li>The site library contains all collected sites (i.e. study areas) and information about those sites.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Site code:</dt>
<dd><ul class="first last">
<li>A site code separates site entries of one kind from each other. It needs to be a unique integer number.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Identification code:</dt>
<dd><ul class="first last">
<li>The identification code is used when there is a need to separate site entries into categories. If two site entries share the same identification code they belong to the same category.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Using the plugin - The different components of the plugin and the plugin output.</strong>：</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Main window:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>The main window contains all the user interface components of the plugin. Navigation uses tabs, with each providing some of the information needed. The are two categories:</dt>
<dd><ul class="first simple">
<li>main settings tab</li>
<li>site library</li>
</ul>
<div class="last figure">
<img alt="_images/SP_static.jpg" src="_images/SP_static.jpg" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>The main window has buttons to specify to:</dt>
<dd><ul class="first last">
<li><p class="first">indicate the folder where the output will be generated</p>
</li>
<li><p class="first">to start the process of generating the output</p>
</li>
<li><p class="first">to close the main window.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Note</span><span class="p">:</span> <span class="n">If</span> <span class="n">the</span> <span class="n">folder</span> <span class="n">selected</span> <span class="k">for</span> <span class="n">the</span> <span class="n">output</span> <span class="n">files</span> <span class="n">already</span> <span class="n">contains</span>
<span class="n">files</span> <span class="n">generated</span> <span class="kn">from</span> <span class="nn">SUEWS</span> <span class="n">Prepare</span> <span class="n">these</span> <span class="n">files</span> <span class="n">will</span> <span class="n">be</span> <span class="o">**</span><span class="n">overwritten</span><span class="o">**</span>
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Main settings tab：</dt>
<dd><ul class="first simple">
<li>The main settings tab is where the plugin is provided with inputs from outside sources such as text files and vector layer attributes. Basically anything that is not part of the site library.</li>
</ul>
<div class="figure">
<img alt="_images/SUEWSPrepare_main.png" src="_images/SUEWSPrepare_main.png" />
</div>
<p class="last">Plugin window with the main settings tab selected.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Polygon grid：</dt>
<dd><ul class="first simple">
<li>The polygon grid is used to provide the plugin with further information through the grid attribute table. Each part of the grid will create a separate entry in the plugins output. The polygon grid can be in any vector file format compatible with QGIS, however, it is recommended to use the shape file format.</li>
<li>To use an existing polygon grid layer in the plugin add the layer to the QGIS interface. This can be done either by dragging and dropping the file into the QGIS program or by using the menu <strong>Layers</strong>. Any polygon layers added to the QGIS interface can then be selected for use in the plugin from the drop down menu in the main settings tab marked <strong>Vector polygon grid</strong> If no polygon grid layer is available, there are several opportunities to create these in QGIS. We  recommend to make use of the built-in <strong>Vector tool</strong> (Vector -&gt; Research tools menu)&gt;</li>
<li>When a relevant polygon grid has been selected for the plugin several separate drop down menus allow for data to be collected from the fields in the polygon grid attribute table. The initial selections in these drops down menus might not be correct and needs to be manually corrected by the user.</li>
<li>The input in the drop down menu marked <strong>ID field</strong> in the box for polygon grid selection needs to correlate with the polygon layers attribute field for feature ids or any attribute field containing unique integer numbers. The polygon layer should be in a coordinate system that can be related to both lat/lon coordinates as well as meters. The polygon features included in the polygon vector grid can be of any shape and size.</li>
</ul>
<div class="last figure">
<img alt="_images/SP_Polygon.jpg" src="_images/SP_Polygon.jpg" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Data for land cover fractions, building morphology and tree morphology ：</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>To use SUEWS land cover and morphology data for buildings and vegetation are needed. This information can be acquired through other plugins in UMEP. This data can then be added into SUEWSPrepare by two different options:</dt>
<dd><ul class="first last simple">
<li>Import the data as text</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>To do this click the buttons in the boxes associated with these types of data and follow the import dialogs to select the correct text file. When a file has been selected the file path will be shown in the text boxes above the buttons. The text files on land cover and morphology are generated with the <a class="reference external" href="#Urban_Land_Cover:_Land_Cover_Fraction_(Point)">Land Cover Fraction</a> plugin and the <a class="reference external" href="#Urban_Morphology:_Image_Morphometric_Parameters_Calculator_(Point)">Image Morphometric Calculator</a>, respectively.</dt>
<dd><ul class="first simple">
<li>Alternatively, the data need to be available in the attribute table of the polygon layer. If the data are available in this format simply check the check boxes below the buttons to change the interface from buttons into drop down menus. In the drop down menus select the correct attribute fields for the data and the selection is done.</li>
</ul>
<div class="figure">
<img alt="_images/SP_landcover.jpg" src="_images/SP_landcover.jpg" />
</div>
<p>Box associated with land cover fractions data. The button has been used to import a file containing land cover fraction data.</p>
<div class="figure">
<img alt="_images/SP_landcover2.jpg" src="_images/SP_landcover2.jpg" />
</div>
<p class="last">Box associated with land cover fractions when the checkbox is checked. The drop down menus can be used to import land cover fraction data.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Meteorological data：</dt>
<dd><ul class="first simple">
<li>The meteorological data have to be imported from a <strong>text file</strong>. Use the button in the box for meteorological data, follow the dialog and select the correct text file. The meteorological data used in the various UMEP-plugins is format specific and can be generated from other data sources using the <a class="reference external" href="#Meteorological_Data:_MetPreprocessor">MetPreprocessor</a> plugin. There you can also find more information on what parameters are required in the meteorological dataset.</li>
</ul>
<div class="figure">
<img alt="_images/SP_met.jpg" src="_images/SP_met.jpg" />
</div>
<p class="last">Box for meteorological data. The button has been used to import a file containing meteorological data.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Daylight savings time：</dt>
<dd><ul class="first simple">
<li>The plugin needs to have access to the correct days in which the switches to and from daylight savings time occurs in the region. The numbers in the text boxes represent the <a class="reference external" href="http://disc.sci.gsfc.nasa.gov/julian_calendar.html">days of year</a>. For example, the 21st of January is day of year 21 and the 2nd of February is day of year be 33 and so on. Make sure the days in the text boxes for daylight savings time in the main settings tab are correct for <a class="reference external" href="https://en.wikipedia.org/wiki/Daylight_saving_time_by_country">your region</a>.</li>
</ul>
<div class="figure">
<img alt="_images/SP_DLS.jpg" src="_images/SP_DLS.jpg" />
</div>
<p class="last">Box used for setting the start and end of day lights savings time.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Population density：</dt>
<dd><ul class="first last simple">
<li>This data needs to be added through the polygon grid attribute table. Make sure that the data exist as an attribute field and select it in the drop down menu.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Wall area (optional) ：</dt>
<dd><ul class="first simple">
<li>This data needs to be added through the polygon grid attribute table. Make sure that the data exist as an attribute field and select it in the drop down menu. This can be calculated from a DSM using the <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Geometry:_Wall_Height_and_Aspect">Wall height and aspect calculator</a>.</li>
</ul>
<div class="figure">
<img alt="_images/SUEWSPrepare_wallarea.png" src="_images/SUEWSPrepare_wallarea.png" />
</div>
<p class="last">Box for wall area data.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Land use fraction (optional) ：</dt>
<dd><ul class="first last">
<li><p class="first">his data needs to be added through a text file. Information needed is land use fractions for impervious and building land cover classes. It is possible to include three impervious and five building classes. The format of the text file should be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ID</span> <span class="n">fLUp1</span> <span class="n">fLUp2</span> <span class="n">fLUp3</span> <span class="n">Code_LUpaved1</span> <span class="n">Code_LUpaved2</span> <span class="n">Code_LUpaved3</span> <span class="n">fLUb1</span> <span class="n">fLUb2</span> <span class="n">fLUb3</span> <span class="n">fLUb4</span> <span class="n">fLUb5</span> <span class="n">Code_LUbuilding1</span> <span class="n">Code_LUbuilding2</span> <span class="n">Code_LUbuilding3</span> <span class="n">Code_LUbuilding4</span> <span class="n">Code_LUbuilding5</span>
<span class="mi">1</span> <span class="mi">0</span> <span class="mf">0.62</span> <span class="mf">0.38</span> <span class="mi">806</span> <span class="mi">807</span> <span class="mi">808</span> <span class="mf">0.90</span> <span class="mf">0.10</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">801</span> <span class="mi">802</span> <span class="mi">803</span> <span class="mi">804</span> <span class="mi">805</span>
<span class="o">...</span>
</pre></div>
</div>
<p>where <em>f</em> is fraction, <em>LU</em> is land use and <em>p</em> is paved. Fractions must add up to 1 for paved and buildings respectively. A plugin to generate this text file is not yet created.</p>
<div class="figure">
<img alt="_images/SUEWSPrepare_landuse.png" src="_images/SUEWSPrepare_landuse.png" />
</div>
<p>Box for land use data.</p>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Initial conditions ：</dt>
<dd><ul class="first simple">
<li>The SUEWS model requires information of initial conditions. SUEWSPRepare generates some basic information used to create a file called <strong>InitialConditionsXXXX_YYYY.nml</strong> where XXXX is the ID grid number.</li>
</ul>
<div class="figure">
<img alt="_images/SUEWSPrepare_init.png" src="_images/SUEWSPrepare_init.png" />
</div>
<p class="last">Box for initial conditions.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Site library tabs ：</dt>
<dd><ul class="first simple">
<li>The remaining tabs besides the main settings tab all fall under the same category, namely site library tabs. A site library tab represents certain characteristics of an area. A tab can consist of one or more widgets. Each widget has a predetermined layout but will represent different kinds of information. The left part of a widget can be used to select a site entry for the plugin output or to create a new entry to the site library. The right part of a widget will show information about a site through variables.</li>
</ul>
<div class="figure">
<img alt="_images/SP_siteLib.jpg" src="_images/SP_siteLib.jpg" />
</div>
<p class="last">Some of the components of a site library tab.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Selecting a site ：</dt>
<dd><ul class="first simple">
<li>The selection of a site is done through a drop down menu marked “Code”. The codes in the drop down menu represent the site codes for a site. Each code represents one site entry. Selecting a code will show the values of the variables for the site entry in the variable box the right side of the tab. The code selected will be used in the output of the plugin.</li>
<li>It is possible to use separate codes for each feature in the polygon grid. This requires a field in the polygon grid attribute table that represent the code that is to be used for each feature. If there is such a field click the checkbox marked “Use unique codes for each entry” and select the correct field from the drop down menu.</li>
</ul>
<div class="figure">
<img alt="_images/SP_siteCode.jpg" src="_images/SP_siteCode.jpg" />
</div>
<p>Site code selection in a site library tab</p>
<div class="figure">
<img alt="_images/Figure12.png" src="_images/Figure12.png" />
</div>
<p class="last">Using more than one site code.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Creating a new site entry:</dt>
<dd><ul class="first last simple">
<li>To create a new site entry click the button marked “Edit values”. This will make the text boxes for the variables in the right box available for editing. When you are satisfied with the changes press the button marked “Make changes”. This will show a dialog window that will ask you to provide a site code for your new entry and some description of the site you are adding. After this information is provided you are also able to add an optional url to a picture that represent the site.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Plugin Output:</dt>
<dd><ul class="first last simple">
<li>In the output folder specified, a number of text files needed as input for the SUEWS model is created. These can be used in conjunction with <a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Urban_Energy_Balance:_Urban_Energy_Balance_.28SUEWS.2FBLUEWS.2C_advanced.29">SUEWS/BLUEWS (Advanced)</a>. Also, see the <a class="reference external" href="http://urban-climate.net/umep/SUEWS">SUEWS manual</a> for more information.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="processor">
<h1>Processor<a class="headerlink" href="#processor" title="Permalink to this headline">¶</a></h1>
<div class="section" id="outdoor-thermal-comfort-solweig">
<h2>Outdoor Thermal Comfort: SOLWEIG<a class="headerlink" href="#outdoor-thermal-comfort-solweig" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The <strong>SOLWEIG</strong> plugin can be used to calculate spatial variations of mean radiant temperature (T~mrt~) and radiant fluxes using digital surface models (DSM) and ground cover information. Optionally, vegetation DSMs could also be used. The methodology that is used to generate shadows originates from Ratti and Richens (1990) and is further developed and described in Lindberg and Grimmond (2011) and Lindberg et al. (2016). The current version of the model is 2016a.</li>
<li>The full manual of the SOLWEIG model can be found <a class="reference external" href="http://urban-climate.net/umep/SOLWEIG">here</a>.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Location:
- The SOLWEIG model is located at</p>
<blockquote>
<div><ul class="simple">
<li>UMEP</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Outdoor Thermal Comfort</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>SOLWEIG</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">Related Preprocessors：
- <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Meteorological_Data:_MetPreprocessor">MetdataPreprocessor</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Meteorological_Data:_Download_data_.28WATCH.29">Download data (WATCH)</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Geometry:_Sky_View_Factor_Calculator">SkyViewFactor Calculator</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Geometry:_Wall_Height_and_Aspect">Wall Height and Aspect</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Land_Cover:_Land_Cover_Reclassifier">LandCoverReclassifier</a>   |</p>
</li>
<li><dl class="first docutils">
<dt>Dialog box：</dt>
<dd><div class="first last figure">
<img alt="_images/SOLWEIG.png" src="_images/SOLWEIG.png" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog sections ：</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Spatial data</td>
<td>Spatial input data is specified</td>
</tr>
<tr class="row-even"><td>Meteorological data</td>
<td>Meteorological input data is specified, as a continuous file or specific momentary values.</td>
</tr>
<tr class="row-odd"><td>Environmental parameters</td>
<td>Possibilities to alter emissiveties and albedos for the different urban surfaces.</td>
</tr>
<tr class="row-even"><td>Optional settings</td>
<td>Here additional setting such as including POIs (Points of Interest) is found.</td>
</tr>
<tr class="row-odd"><td>Human exposure parameters</td>
<td>Settings for calculating mean radiant temperature.</td>
</tr>
<tr class="row-even"><td>Output maps</td>
<td>Options to choose the geotiffs to be saved for each iteration.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li><p class="first">Spatial data ：</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Building and Ground DSM</td>
<td>A DSM consisting of ground and building heights. This dataset also decides the latitude and longitude used for the calculation of Sun position.</td>
</tr>
<tr class="row-even"><td>Vegetation Canopy DSM</td>
<td>A DSM consisting of pixels with vegetation heights above ground. Pixels where no vegetation is present should be set to zero.</td>
</tr>
<tr class="row-odd"><td>Vegetation Trunk Zone DSM</td>
<td>A DSM (geoTIFF) consisting of pixels with vegetation trunk zone heights above ground. Pixels where no vegetation is present should be set to zero.</td>
</tr>
<tr class="row-even"><td>Use vegetation scheme</td>
<td>Tick this box if you want to include vegetation (trees and bushes) in the calculations.</td>
</tr>
<tr class="row-odd"><td>Trunk Zone DSM Exist</td>
<td>Tick this in if a trunk zone DSM already exist.</td>
</tr>
<tr class="row-even"><td>Transmissivity of Light Through Vegetation (%)</td>
<td>Percentage of light that is penetrating through vegetation. Default value is set to 3 % according to Konarska et al. (2013).</td>
</tr>
<tr class="row-odd"><td>Percent of Canopy Height</td>
<td>If a trunk zone vegetation DSM is absent, this can be generated based on the height of the Canopy DSM. The default percentage is set to 25%.</td>
</tr>
<tr class="row-even"><td>Save generated Trunk zone DSM</td>
<td>Tick this in if you want to save your TDSM that is generated.</td>
</tr>
<tr class="row-odd"><td>Use land cover scheme</td>
<td>Available since v2015a. Land cover grid should be in the UMEP standard format <strong>except</strong> for the two tree classes (deciduous and conifer) as the land cover grid should represent what is on the ground surface. UMEP land cover grid can be prepared in the Pre-processor.</td>
</tr>
<tr class="row-even"><td>Use land cover grid to produce building grid</td>
<td>Tick this in if the building grid should be created from the land cover grid. Otherwise, a DEM including only ground heights must be added. This will then be used to derive a building grid together with the ground and building DSM.</td>
</tr>
<tr class="row-odd"><td>Save generated building grid</td>
<td>Tick this in if you want to save the boolean building grid that is generated.</td>
</tr>
<tr class="row-even"><td>SkyViewFactor grids</td>
<td>The SOLWEIG model make use of SVFs to calculate T<sub>mrt</sub>. The zip-file needed can be created with the SkyViewFactor calculator found in the UMEP Pre-processor.</td>
</tr>
<tr class="row-odd"><td>Wall height raster</td>
<td>The SOLWEIG model make use of wall height raster to calculate T<sub>mrt</sub>. This can be calculated using the Wall height and aspect plugin found in the UMEP Pre-processor</td>
</tr>
<tr class="row-even"><td>Wall aspect raster</td>
<td>The SOLWEIG model make use of wall height raster to calculate T<sub>mrt</sub>. This can be calculated using the Wall height and aspect plugin found in the UMEP Pre-processor.</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Meteorological data：</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Use continuous meteorological dataset</td>
<td>Tick this in if a time series of data should be used. The specific format could be prepared in the UMEP Pre-processor.</td>
</tr>
<tr class="row-even"><td>Estimate diffuse and direct components from global radiation</td>
<td>Tick this box if diffuse and direct shortwave radiation is unavailable. The Reindl et al. (1990) model is used to calculate diffuse radiation. Direct radiation perpendicular to the solar beam should be considered.</td>
</tr>
<tr class="row-odd"><td>Settings for one iteration.</td>
<td>If a meteorological dataset is not used there is a possibility to run the model for one iteration using the calendar and spin-boxes to set meteorological variables present here. The default values are for a clear Summer day at 1230 in Göteborg, Sweden.</td>
</tr>
<tr class="row-even"><td>UTC offset</td>
<td>Time zone needs to be specified. Positive numbers moving east (e.g. Stockholm UTC +1).</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Optional settings：</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Include POIs</td>
<td>By ticking in the option to include POIs (Point of Interest), a vector point layer can be added and full model output are written out to text files for the specific POI. Multiple POIs can be used by including many points in the vector file. See the <a class="reference external" href="http://www.urban-climate.net/umep/SOLWEIG">full manual</a> for more information.</td>
</tr>
<tr class="row-even"><td>Adjust sky-emissivity according to Jonsson et al. (2006)</td>
<td>Tick this box to include adjustment (0.04) of sky emissivity which was present in the earlier versions of the SOLWEIG model (not recommended).</td>
</tr>
<tr class="row-odd"><td>Consider human as cylinder instead of box</td>
<td>Tick this box to consider man as a cylinder instead of a box according to Holmer at al. (2015).</td>
</tr>
</tbody>
</table>
<ul>
<li><dl class="first docutils">
<dt>Environmental parameters：</dt>
<dd><ul class="first simple">
<li>Emissivity (ground)||Emissivity of ground. Not used if land cover scheme is activated.</li>
</ul>
<table border="1" class="last docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Albedo (buildings)</td>
<td>Albedo of building walls and roofs.</td>
</tr>
<tr class="row-even"><td>Albedo (ground)</td>
<td>Albedo of ground surfaces. Not used if land cover scheme is active.</td>
</tr>
<tr class="row-odd"><td>Emissivity (walls)</td>
<td>Emissivity of building walls and roofs.</td>
</tr>
<tr class="row-even"><td>Emissivity (ground)</td>
<td>Emissivity of ground. Not used if land cover scheme is activated.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Human exposure parameters ：</dt>
<dd><ul class="first simple">
<li>Posture of the human body||Choose between standing (default) and sitting.</li>
</ul>
<table border="1" class="last docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Absorption of shortwave radiation</td>
<td>Amount of shortwave radiation that the human body absorb.</td>
</tr>
<tr class="row-even"><td>Absorption of longwave radiation</td>
<td>Amount of longwave radiation that the human body absorb.</td>
</tr>
<tr class="row-odd"><td>Posture of the human body</td>
<td>Choose between standing (default) and sitting.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output maps:</dt>
<dd><ul class="first last simple">
<li>A number of different outputs can be chosen here. All grids will be written out as GeoTIFFs at the location specified as the output folder.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last simple">
<li>Starts the calculations. As SOLWEIG is a 2.5D model, large grids (i.e. high number of pixels) will take a relatively long time to compute. The model is embedded in a so called worker which means that you can continue working with QGIS while the model runs.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add Average mean radiant temperature to the map canvas:</dt>
<dd><ul class="first last simple">
<li>If ticked, an average T<sub>mrt</sub> map will be added to the current</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last simple">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Quick example on how to run SOLWEIG：</dt>
<dd><dl class="first last docutils">
<dt>presented:</dt>
<dd><ol class="first last arabic">
<li><p class="first">Download and extract (unzip) the test dataset (<a class="reference external" href="https://bitbucket.org/fredrik_ucg/umep/downloads/testdata_UMEP.zip">testdata_UMEP.zip</a>).</p>
</li>
<li><p class="first">Add the raster layers (DSM, CDSM and land cover) from the Goteborg folder into a new QGIS session. The coordinate system of the grids is <strong>Sweref99 1200 (EPSG:3007)</strong>.</p>
</li>
<li><p class="first">In order to run SOLWEIG, some additional datasets must be created based on the raster grids you just added. Open the SkyViewFactor Calculator from the UMEP Pre-processor and calculate SVFs using both your DSM and CDSM. Leave all other settings as default.</p>
</li>
<li><p class="first">Open the Wall height and aspect plugin from the UMEP Pre-processor and calculate both wall height and aspect using the DSM and your input raster. Tick in the box to add them to your project. Leave all other settings as default.</p>
</li>
<li><p class="first">Now you are ready to generate your first T<sub>mrt</sub> map. Open SOLWEIG and use the settings as shown in the figure below but replace the paths to the fit your computer environment. When you are finished, press <em>Run</em>.</p>
<div class="figure">
<img alt="_images/SOLWEIGfirsttry.png" src="_images/SOLWEIGfirsttry.png" />
</div>
<p>There is also a meteorological file present in the test dataset that can be used to run the model for a whole day.</p>
</li>
</ol>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks ：</dt>
<dd><ul class="first last simple">
<li>All DSMs need to have the same extent and pixel size.</li>
<li>This plugin is computationally intensive i.e. large grids will take a lot of time and very large grids will not be possible to use. Large grids e.g. larger than 4000000 pixels should preferably be tiled before.</li>
<li>SOLWEIG focus on pedestrian radiation fluxes and it is not recommended to consider fluxes on building roofs.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References：</dt>
<dd><ul class="first last simple">
<li>Holmer, B., Lindberg, F., Rayner, D. and Thorsson, S. 2015: How to transform the standing man from a box to a cylinder – a modified methodology to calculate mean radiant temperature in field studies and models, ICUC9 – 9 th International Conference on Urban Climate jointly with 12th Symposium on the Urban Environment, BPH5: Human perception and new indicators. Toulouse, July 2015.</li>
<li>Konarska J, Lindberg F, Larsson A, Thorsson S, Holmer B 2013. Transmissivity of solar radiation through crowns of single urban trees—application for outdoor thermal comfort modelling. <a class="reference external" href="http://link.springer.com/article/10.1007/s00704-013-1000-3">Theoret. Appl. Climatol., 1–14</a></li>
<li>Lindberg, F., Grimmond, C.S.B., 2011a. The influence of vegetation and building morphology on shadow patterns and mean radiant temperatures in urban areas: model development and evaluation. <a class="reference external" href="http://link.springer.com/article/10.1007/s00704-010-0382-8">Theoret. Appl. Climatol. 105, 311–323</a></li>
<li>Riendl D.T., Beckman W.A. and Duffie J.A. (1990), Diffuse Fraction Correlations, Solar Energy, Vol. 45, No.1, pp. 1-7.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="outdoor-thermal-comfort-extremefinder">
<h2>Outdoor Thermal Comfort: ExtremeFinder<a class="headerlink" href="#outdoor-thermal-comfort-extremefinder" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Bei</span> <span class="n">Huang</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Andy</span> <span class="n">Gabey</span> <span class="p">(</span><span class="n">Reading</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Current Options:</dt>
<dd><ul class="first last simple">
<li>Identifies extreme high events (e.g. Heat waves) and low events (e.g. Cold Waves). Designed primarily for temperature data (heat waves identified from daily maximum and mean T; cold waves from daily minimum), but can also be used to indicate potential high and low extremes in other meteorological variables.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Data must be provided by the user, and can be:</dt>
<dd><ul class="first last simple">
<li>Previously-downloaded WATCH data in a NetCDF (.nc) file (this can be obtained from the WATCH downloader)</li>
<li>Other NetCDF (.nc) file containing sub-daily measurements, or daily maximum/mean/minimum values. Must contain a <strong>‘time</strong>’ dimension, and variable(s) with name(s) matching those being analysed using the ExtremeFinder.</li>
<li>Text (.txt) file, daily T<sub>max</sub>, T<sub>avg</sub> or T<sub>min</sub> (<a class="reference external" href="http://www.urban-climate.net/watch_data/data%20set%20sample.txt">file sample</a>: 1979-01-01 to 2009-12-31). Only temperature analysis can be performed using a text file.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Method ：</dt>
<dd><dl class="first last docutils">
<dt>—  Basis for thresholds - set into Input.nml (namelist)</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://science.sciencemag.org/content/305/5686/994">Meehl and Tebaldi (2004)</a>: 81st, 97.5th</li>
<li><a class="reference external" href="http://www.nature.com/ngeo/journal/v3/n6/full/ngeo866.html">Fischer and Schär (2010)</a>: 90th</li>
<li><a class="reference external" href="https://link.springer.com/article/10.1007%2Fs00382-013-1714-z">Vautard et al. (2013)</a>: 90th</li>
<li><a class="reference external" href="https://link.springer.com/article/10.1007/s00382-014-2434-8">Schoetter et al. (2014)</a>: 98th</li>
<li><a class="reference external" href="http://www.kirj.ee/26593/?tpl=1061&amp;c_tpl=1064">Sirje Keevallik (2015)</a>: 10th</li>
<li><a class="reference external" href="http://onlinelibrary.wiley.com/doi/10.1002/asl.232/abstract">A. K. Srivastava (2009)</a>: 3 °C</li>
<li>Busuioc et al. (2010): 5 °C</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</li>
<li><p class="first">Location:
-  UMEP</p>
<blockquote>
<div><ul class="simple">
<li>Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Outdoor Themal Comfort</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>ExtremeFinder</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt>Dialog box:</dt>
<dd><div class="first figure">
<img alt="_images/Extremefinder3.png" src="_images/Extremefinder3.png" />
</div>
<p class="last">The interface for the ExtremeFinder plugin</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Steps to use:</dt>
<dd><ol class="first last arabic simple">
<li>Select climate data: The ExtremeFinder will use all the data available in its analysis. You will be prompted for a text (.txt) or NetCDF (.nc) file:<ul>
<li><em>NetCDF file</em>: The latitude, longitude, start and end date boxes will be populated automatically, if the data is available in the NetCDF file.</li>
<li><em>Text file</em>: The latitude, longitude, start and end date boxes must be filled in by the user, as the information is needed in calculations:<ul>
<li><em>Latitude</em> (degrees N) and <em>Longitude</em> (degrees E) are WGS84 co-ordinates</li>
<li><em>Start</em> and <em>end date</em> are inclusive and must match the data extent</li>
</ul>
</li>
</ul>
</li>
<li>Select the <em>extreme event type</em> and the <em>calculation method</em>:<ul>
<li>Event types are either Extreme <em>high</em> (e.g. Heat wave) or <em>low</em> (e.g. Cold wave)</li>
<li>There are several different ways to identify extremes, depending on the event type</li>
<li>Choose the <em>meteorological variable</em> to analyse for extremes<ul>
<li><strong>Note:</strong> The methods in the Extreme Finder are based on Tair and may not be appropriate for other variables</li>
</ul>
</li>
</ul>
</li>
<li>Select Output File: A list of extreme events will be written to the file<ul>
<li>Note: this will be overwritten if not a new name</li>
</ul>
</li>
<li>Run: Performs the analysis</li>
</ol>
</dd>
</dl>
</li>
</ul>
<dl class="docutils">
<dt># Output: Extreme events (heat waves used as example below) ：</dt>
<dd><ol class="first last arabic">
<li><p class="first">Daily T<sub>max</sub> (or T<sub>avg</sub> / T<sub>min</sub>) with time (Y= Year, X=Month)</p>
<ul>
<li><p class="first">Colour gives Temperature (see key)</p>
</li>
<li><dl class="first docutils">
<dt>Yellow Box Highlights Heatwave (Coldwave) periods This loads the model interface dialog box:</dt>
<dd><div class="first figure">
<img alt="_images/350px-TMax1.jpg" src="_images/350px-TMax1.jpg" />
</div>
<p class="last">Heat/Cold wave periods</p>
</dd>
</dl>
</li>
</ul>
</li>
<li><p class="first">Box plot of distribution of heat (cold) wave by year.</p>
<ul>
<li><p class="first">whiskers =1.5* IQR</p>
</li>
<li><p class="first">outliers
- any data beyond the whiskers</p>
<blockquote>
<div><div class="figure">
<img alt="_images/350px-HW_Box.jpg" src="_images/350px-HW_Box.jpg" />
</div>
<p>Box-and-whisker plot of Heat/Cold wave days each year</p>
</div></blockquote>
</li>
</ul>
</li>
<li><dl class="first docutils">
<dt>Number of heat (cold) waves days per year</dt>
<dd><div class="first figure">
<img alt="_images/350px-HWDays.jpg" src="_images/350px-HWDays.jpg" />
</div>
<p class="last">Histogram showing number of Heat/Cold wave days each year</p>
</dd>
</dl>
</li>
</ol>
</dd>
</dl>
</div>
<div class="section" id="urban-energy-balance-gqf">
<h2>Urban Energy Balance: GQ<sub>F</sub><a class="headerlink" href="#urban-energy-balance-gqf" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Andy</span> <span class="n">Gabey</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Izzy</span> <span class="n">Capel</span> <span class="n">Timms</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Sue</span> <span class="n">Grimmond</span> <span class="p">(</span><span class="n">Reading</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>How to Cite:</dt>
<dd><ul class="first last simple">
<li>Gabey A, S Grimmond, I Capel-Timms 2018: Anthropogenic Heat Flux: advisable spatial resolutions when input data are scarce Theoretical and Applied Climatology <a class="reference external" href="https://doi.org/10.1007/s00704-018-2367-y">https://doi.org/10.1007/s00704-018-2367-y</a></li>
<li>Lindberg F, CSB Grimmond, A Gabey, B Huang, CW Kent, T Sun, NE Theeuwes, L Järvi, H Ward, I Capel-Timms, YY Chang, P Jonsson, N Krave, DW Liu, D Meyer, KFG Olofson, JG Tan, D Wästberg, L Xue, Z Zhang 2018: Urban multiscale environmental predictor (UMEP) - An integrated tool for city-based climate services Environmental Modelling and Software 99, 70–87 10.1016/j.envsoft.2017.09.020</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><p class="first last"><a class="reference external" href="http://urban-climate.net/umep/GQF_Manual">See separate manual</a></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>The GreaterQF plugin is located at</dt>
<dd><ul class="first simple">
<li>UMEP</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Energy Balance</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>GreaterQF</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog box：</dt>
<dd><div class="first last figure">
<img alt="_images/GQF.png" src="_images/GQF.png" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog sections：</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>The model run is configured using the dialog box:</dt>
<dd><ul class="first last">
<li><em>Start date</em> and <em>end date</em>: The first and final dates for which the model should be run.</li>
<li><em>Output areas</em>: Two options are currently available: Local authority areas and 1km grid. These select the spatial units of the model calculations.</li>
<li><em>Include QF components</em>: The components of anthropogenic heat flux for the model to include in calculations.</li>
<li><em>Output path</em>: A directory that houses model outputs.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Model outputs ；</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt><strong>Example map</strong></dt>
<dd><ul class="first last simple">
<li>The total anthropogenic heat flux for the first time step is displayed in QGIS to demonstrate model output and the output areas. In order for these areas to be displayed correctly, the coordinate reference system must be selected. The QGIS “Select CRS” screen will appear, and EPSG 27700 (British National Grid) must be chosen.</li>
<li>The layer displaying model output also contains the other contributions to QF (e.g. car transport). These can be visualised using standard QGIS methods of styling the layer according to the selected component, or inspecting the layer attributes table.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>CSV files</strong></dt>
<dd><ul class="first simple">
<li>A CSV file is generated for each of the 19 contributions to QF (e.g. car travel, wastewater heating) and the total QF. Each file contains a column per output area (shown in the example map) and a row per time step. These are labelled accordingly. The filenames are abbreviated where necessary for compatibility, with the following convention used:</li>
</ul>
<table border="1" class="last docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>El</td>
<td>Electricity</td>
</tr>
<tr class="row-even"><td>Gas</td>
<td>Gas</td>
</tr>
<tr class="row-odd"><td>Dm</td>
<td>Domestic use</td>
</tr>
<tr class="row-even"><td>Id</td>
<td>Industrial use</td>
</tr>
<tr class="row-odd"><td>Tspt</td>
<td>Transport</td>
</tr>
<tr class="row-even"><td>Unre</td>
<td>Unrestricted electricity (non-Economy 7)</td>
</tr>
<tr class="row-odd"><td>Eco7</td>
<td>Economy 7 electricity</td>
</tr>
<tr class="row-even"><td>Everything</td>
<td>Grand total QF across all sources</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Python data object</strong> (For internal use)</dt>
<dd><ul class="first last simple">
<li>A “pickled” Python data object containing the results is also saved in the local temporary folder for future use with other UMEP components.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References  ：</dt>
<dd><ul class="first last simple">
<li>Iamarino M, Beevers S &amp; Grimmond CSB (2012) High-resolution (space, time) anthropogenic heat emissions: London 1970-2025 <a class="reference external" href="http://doi.wiley.com/10.1002/joc.2390">International J. of Climatology 32, 11, 1754-1767</a></li>
<li>Gabey A, S Grimmond, I Capel-Timms 2018: Anthropogenic Heat Flux: advisable spatial resolutions when input data are scarce Theoretical and Applied Climatology <a class="reference external" href="https://doi.org/10.1007/s00704-018-2367-y">https://doi.org/10.1007/s00704-018-2367-y</a></li>
<li>Lindberg F, CSB Grimmond, A Gabey, B Huang, CW Kent, T Sun, NE Theeuwes, L Järvi, H Ward, I Capel-Timms, YY Chang, P Jonsson, N Krave, DW Liu, D Meyer, KFG Olofson, JG Tan, D Wästberg, L Xue, Z Zhang 2018: Urban multiscale environmental predictor (UMEP) - An integrated tool for city-based climate services Environmental Modelling and Software 99, 70–87 10.1016/j.envsoft.2017.09.020</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-energy-balance-lqf">
<h2>Urban Energy Balance: LQ<sub>F</sub><a class="headerlink" href="#urban-energy-balance-lqf" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Andy</span> <span class="n">Gabey</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Izzy</span> <span class="n">Capel</span><span class="o">-</span><span class="n">Timms</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span>
<span class="n">Sue</span> <span class="n">Grimmond</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Sam</span> <span class="n">Jackson</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span>
<span class="n">XY</span> <span class="n">Ao</span> <span class="p">(</span><span class="n">SIMS</span><span class="p">),</span> <span class="n">Bei</span> <span class="n">Huang</span><span class="p">(</span><span class="n">Tsinghua</span> <span class="n">Unviersity</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction  ：</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://urban-climate.net/umep/LQF_Manual">See separate manual</a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References  ：</dt>
<dd><ul class="first last simple">
<li>Allen, L., Lindberg, F. and Grimmond, C. (2011) Global to city scale urban anthropogenic heat flux: model and variability. <a class="reference external" href="http://onlinelibrary.wiley.com/doi/10.1002/joc.2210/abstract">International Journal of Climatology 31:13, 1990-2005.</a></li>
<li>Lindberg, F., Grimmond, C., Yogeswaran, N., Kotthaus, S. and Allen, L. (2013a) Impact of city changes and weather on anthropogenic heat flux in Europe 1995–2015. <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S2212095513000059">Urban Climate 4, 1-15.</a></li>
<li>Gabey A, S Grimmond, I Capel-Timms 2018: Anthropogenic Heat Flux: advisable spatial resolutions when input data are scarce Theoretical and Applied Climatology <a class="reference external" href="https://doi.org/10.1007/s00704-018-2367-y">https://doi.org/10.1007/s00704-018-2367-y</a></li>
<li>Lindberg F, CSB Grimmond, A Gabey, B Huang, CW Kent, T Sun, NE Theeuwes, L Järvi, H Ward, I Capel-Timms, YY Chang, P Jonsson, N Krave, DW Liu, D Meyer, KFG Olofson, JG Tan, D Wästberg, L Xue, Z Zhang 2018: Urban multiscale environmental predictor (UMEP) - An integrated tool for city-based climate services Environmental Modelling and Software 99, 70–87 <a class="reference external" href="https://10.1016/j.envsoft.2017.09.020">https://10.1016/j.envsoft.2017.09.020</a></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-energy-balance-urban-energy-balance-suews-simple">
<h2>Urban Energy Balance: Urban Energy Balance (SUEWS, simple)<a class="headerlink" href="#urban-energy-balance-urban-energy-balance-suews-simple" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span> <span class="n">Sue</span> <span class="n">Grimmond</span>
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>Introduction：</dt>
<dd><ul class="first last">
<li>SUEWS can be run as a standalone or via UMEP (see <a class="reference external" href="http://urban-climate.net/umep/SUEWS">SUEWS Manual</a>).</li>
<li>This plugin makes it possible to run a simplified version of the Surface Urban Energy and Water Balance Scheme (SUEWS). For a full version of the model, the SUEWS/BLUEWS (Advanced) plugin can be used. It is also available as a separate program.</li>
<li>SUEWS (Järvi et al. 2011, 2014, Ward et al. 2016a, b) simulates the urban radiation, energy and water balances using commonly measured/modeled meteorological variables and information about the surface cover. It utilizes an evaporation-interception approach (Grimmond et al. 1991), similar to that used in forests, to model evaporation from urban surfaces.</li>
<li>The model uses seven surface types: paved, buildings, evergreen trees/shrubs, deciduous trees/shrubs, grass, bare soil and water. The surface state for each surface type at each time step is calculated from the running water balance of the canopy where the evaporation is calculated from the Penman-Monteith equation. The soil moisture below each surface type (excluding water) is taken into account.</li>
<li><dl class="first docutils">
<dt>The model distributed with this manual can be run in two standard ways:</dt>
<dd><ul class="first last">
<li>For an individual area</li>
<li>For multiple areas that are contiguous. There is no requirement for the areas to be of any particular shape but here we refer to them as ‘grids’.</li>
</ul>
</dd>
</dl>
</li>
<li>Model applicability: Local scale – so forcing data should be above the height of the roughness elements (trees, buildings). SUEWS Simple is designed to be executed for a single location but the model is also able to be executed on a grid.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<ul>
<li><dl class="first docutils">
<dt>Location:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>The SUEWS Simple plugin is located at</dt>
<dd><ul class="first simple">
<li>UMEP</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Energy Balance</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Energy Balance (SUEWS, Simple)</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Related Preprocessors ：</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Meteorological_Data:_MetPreprocessor">MetdataPreprocessor</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Meteorological_Data:_Download_data_.28WATCH.29">Download data (WATCH)</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Land_Cover:_Land_Cover_Reclassifier">LandCoverReclassifier</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Land_Cover:_Land_Cover_Fraction_.28Point.29">LandCoverFraction (Point)</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Morphology:_Image_Morphometric_Parameters_Calculator_.28Point.29">Image Morphometric Parameters Calculator (Point)</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Morphology:_Source_Area_.28Point.29">Foot Print Model (Point)</a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog Box：</dt>
<dd><div class="first last figure">
<img alt="SuewsSimple.png" src="SuewsSimple.png" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog sections：</dt>
<dd><table border="1" class="colwidths-given first last docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>far right</td>
<td>provides some tips and tricks for running the model.</td>
</tr>
<tr class="row-even"><td>other four</td>
<td>to specify user-defined input data, either manually or by using the appropriate UMEP-plugin in the per-processor.</td>
</tr>
<tr class="row-odd"><td>bottom</td>
<td>to make some additional settings as well as running the model.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>prepared dataset:</dt>
<dd><ul class="first last simple">
<li>SUEWS Simple comes with a prepared dataset that can be used for testing. This can be utilized by pressing <strong>Add settings from test dataset</strong>. This dataset is a fictitious dataset from the central parts of London.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Building Morphology:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>The three site specific building morphology parameters needed are usually derived from Digital Surface Models DSMs. However, they also can be entered manually.</dt>
<dd><ul class="first last">
<li>To use an already generated text file from the Image Morphometric Calculator (Point) plugin.</li>
<li>To open the plugin from SUEWS Simple and generate the data.</li>
</ul>
</dd>
</dl>
</li>
<li>If an already generated text file is used, the <strong>isotropic file</strong> should be used (see Image Morphometric Calculator (Point)).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Tree Morphology:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Three site specific tree morphology parameters need to be specified. These can be derived from a Canopy DSMs that include vegetation heights. This can be entered manually or from the Image Morphometric Calculator (Point) plugin. When the plugin is used there are two options:</dt>
<dd><ul class="first last">
<li>To use an already generated text file from the Image Morphometric Calculator (Point) plugin.</li>
<li>To open the plugin from SUEWS Simple and generate the data.</li>
</ul>
</dd>
</dl>
</li>
<li>If an already generated text file is used, the <strong>isotropic file</strong> should be used (see Image Morphometric Calculator (Point)).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Land Cover Fractions ：</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Land cover fractions should add up to a total of 1. Values can be derived from a UMEP land cover dataset which can be generated via the Land Cover Reclassifier plugin in UMEP. The values can be entered manually or directly from the Land Cover Fraction (Point) plugin. If the plugin is used, there are two options:</dt>
<dd><ul class="first last">
<li>To use an already generated text file from the Land Cover Fraction (Point) plugin.</li>
<li>To open the plugin from SUEWS Simple and generate the data.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Initial Conditions:</dt>
<dd><ul class="first last simple">
<li>The initial conditions are entered here. These relate to time of year, days since rain, soil moisture state and daily mean air temperature at the beginning of a model run. The state of the leaf cycle sets a rough estimate of leaf area index based on season. To adjust this in more detail, the SUEWS, BLUEWS (Advanced) plugin should be used.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Meteorological File:</dt>
<dd><ul class="first last simple">
<li>The location and filename (.txt) of the meteorological file should be specified here. The format used in most UMEP-related plugins where meteorological data is required can be generated using the Metdata Processor in UMEP. For details, see the help section in the Metdata Processor or the SUEWS manual (Ward et al. 2016a).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last simple">
<li>Specify a folder where you would like all the model results to be saved to. Make sure that you have write capabilities to the specified folder.</li>
<li><em>Note if you put it within the UMEP plugin folder– be careful that you do not lose any results if you update the plugin by deleting it first.</em></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Year:</dt>
<dd><ul class="first last simple">
<li>Specify what year you are running.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Latitude:</dt>
<dd><ul class="first last simple">
<li>Specify the latitude in decimal degrees. Positive numbers indicate Northern Hemisphere.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Longitude:</dt>
<dd><ul class="first last simple">
<li>Specify the longitude in decimal degrees. Positive numbers are to the West.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Population Density:</dt>
<dd><ul class="first last simple">
<li>Specify the population density in people/ha (hectare) around the area of interest.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Show Basic Plots of Model Results:</dt>
<dd><ul class="first last simple">
<li>Tick this box in if you would like to generate some simple plots of the result from a model run. This requires that the matplotlib library is added to your QGIS installation.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add Settings from Test Dataset:</dt>
<dd><ul class="first last simple">
<li>This is recommended if you want to try the model for the first time. This uses a year long dataset from London, UK.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last simple">
<li>Button starts the model. All inputs must be set prior to this button being available.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last simple">
<li>Button closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References:</dt>
<dd><ul class="first last simple">
<li>Järvi L, Grimmond CSB &amp; Christen A (2011) The Surface Urban Energy and Water Balance Scheme (SUEWS): Evaluation in Los Angeles and Vancouver <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S0022169411006937">J. Hydrol. 411, 219-237.</a></li>
<li>Järvi L, Grimmond CSB, Taka M, Nordbo A, Setälä H &amp;Strachan IB (2014) Development of the Surface Urban Energy and Water balance Scheme (SUEWS) for cold climate cities, Geosci. Model Dev. 7, 1691-1711, <a class="reference external" href="http://www.geosci-model-dev.net/7/1691/2014/">doi:10.5194/gmd-7-1691-2014</a>.                                                                                                                                                                                                                                                                        |</li>
<li>Ward HC, L Järvi, S Onomura, F Lindberg, CSB Grimmond (2016a) <a class="reference external" href="http://urban-climate.net/umep/SUEWS">SUEWS Manual</a>: Version 2016a</li>
<li>Ward HC. S Kotthaus, L Järvi, CSB Grimmond (2016b) Surface Urban Energy and Water Balance Scheme (SUEWS): development and evaluation at two UK sites <a class="reference external" href=":File:SUEWS_UKEvaluationPaper_Revised_v1-03.pdf">Urban Climate (in press)</a>.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-energy-balance-urban-energy-balance-suews-bluews-advanced">
<h2>Urban Energy Balance: Urban Energy Balance (SUEWS/BLUEWS, advanced)<a class="headerlink" href="#urban-energy-balance-urban-energy-balance-suews-bluews-advanced" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>This plugin makes it possible to run the Surface Urban Energy and Water Balance Scheme (SUEWS). SUEWS is also available as a separate program and a simplified version within UMEP (SUEWS Simple).</li>
<li>SUEWS (Järvi et al. 2011, 2014, Ward et al. 2016a, b) simulates the urban radiation, energy and water balances using commonly measured/modeled meteorological variables and information about the surface cover. It utilizes an evaporation-interception approach (Grimmond et al. 1991), similar to that used in forests, to model evaporation from urban surfaces.</li>
<li>The model uses seven surface types: paved, buildings, evergreen trees/shrubs, deciduous trees/shrubs, grass, bare soil and water. The surface state for each surface type at each time step is calculated from the running water balance of the canopy where the evaporation is calculated from the Penman-Monteith equation. The soil moisture below each surface type (excluding water) is taken into account.</li>
<li>Model applicability: Local scale – so forcing data should be above the height of the roughness elements (trees, buildings)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>The SUEWS Simple plugin is located at</dt>
<dd><ul class="first simple">
<li>UMEP</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Energy Balance</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Energy Balance (SUEWS/BLUEWS, Advanced)</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Related Preprocessors:</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Meteorological_Data:_MetPreprocessor">MetdataPreprocessor</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Meteorological_Data:_Download_data_.28WATCH.29">Download data (WATCH)</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Land_Cover:_Land_Cover_Reclassifier">LandCoverReclassifier</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Land_Cover:_Land_Cover_Fraction_.28Point.29">LandCoverFraction (Point)</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Land_Cover:_Land_Cover_Fraction_.28Grid.29">LandCoverFraction (Grid)</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Morphology:_Image_Morphometric_Parameters_Calculator_.28Point.29">Image Morphometric Parameters Calculator (Point)</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Morphology:_Image_Morphometric_Parameter_Calculator_.28Grid.29">Image Morphometric Parameters Calculator (Grid)</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Morphology:_Source_Area_.28Point.29">Foot Print Model (Point)</a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog box ：</dt>
<dd><div class="first last figure">
<img alt="_images/SuewsAdvanced.png" src="_images/SuewsAdvanced.png" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog sections:</dt>
<dd><ul class="first last simple">
<li>When you run the plugin, you will see the dialog shown below. To use this plugin, all input data needs to be prepared beforehand. This can be done using the various plugins in the pre-processor in UMEP. The settings available in this plugin is used for specifying the settings for a specific model run. You should consult the manual (<a class="reference external" href="http://www.urban-climate.net/umep/SUEWS">1</a>) for instructions and information on what settings to use. For extensive models run it is recommended to execute the model outside of QGIS (see manual). The interface below creates a so-called namelist (<strong>RunControl.nml</strong>) that is used be the model for general settings. After running the model, this file can be found in the suewsmodel directory in the UMEP plugin directory.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References:</dt>
<dd><ul class="first last simple">
<li>Järvi L, Grimmond CSB &amp; Christen A (2011) The Surface Urban Energy and Water Balance Scheme (SUEWS): Evaluation in Los Angeles and Vancouver <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S0022169411006937">J. Hydrol. 411, 219-237.</a></li>
<li>Järvi L, Grimmond CSB, Taka M, Nordbo A, Setälä H &amp;Strachan IB (2014) Development of the Surface Urban Energy and Water balance Scheme (SUEWS) for cold climate cities, Geosci. Model Dev. 7, 1691-1711, <a class="reference external" href="http://www.geosci-model-dev.net/7/1691/2014/">doi:10.5194/gmd-7-1691-2014</a>.                                                                                                                                                                                                                                                                        |</li>
<li>Ward HC, L Järvi, S Onomura, F Lindberg, CSB Grimmond (2016a) <a class="reference external" href="http://urban-climate.net/umep/SUEWS">SUEWS Manual</a>: Version 2016a</li>
<li>Ward HC. S Kotthaus, L Järvi, CSB Grimmond (2016b) Surface Urban Energy and Water Balance Scheme (SUEWS): development and evaluation at two UK sites <a class="reference external" href=":File:SUEWS_UKEvaluationPaper_Revised_v1-03.pdf">Urban Climate (in press)</a>.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="solar-radiation-daily-shadow-pattern">
<h2>Solar Radiation: Daily Shadow Pattern<a class="headerlink" href="#solar-radiation-daily-shadow-pattern" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The <strong>Shadow generator</strong> plugin can be used to generate pixel wise shadow analysis using ground and building digital surface models (DSM). Optionally, vegetation DSMs could also be used. The methodology that is used to generate shadows originates from Ratti and Richens (1990) and is further developed and described in Lindberg and Grimmond (2011). Position of the Sun is calculated using <strong>PySolar</strong>, a python library for various Sun related applications ([2](<a class="reference external" href="http://pysolar.org/">http://pysolar.org/</a>)).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>The Shadow Generator is located at</dt>
<dd><ul class="first simple">
<li>UMEP</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Solar Radiation</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Daily Shadow Pattern</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog box ：</dt>
<dd><div class="first last figure">
<img alt="_images/Shadow_generator.jpg" src="_images/Shadow_generator.jpg" />
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog sections：</dt>
<dd><table border="1" class="colwidths-given first last docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>top</td>
<td>input data is specified</td>
</tr>
<tr class="row-even"><td>middle</td>
<td>setting for positioning the Sun on the hemisphere</td>
</tr>
<tr class="row-odd"><td>bottom</td>
<td>to specify the output and to run the calculations</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Building and Ground DSM:</dt>
<dd><ul class="first last simple">
<li>A DSM consisting of ground and building heights. This dataset also decides the latitude and longitude used for the calculation of Sun position.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vegetation Canopy DSM:</dt>
<dd><ul class="first last simple">
<li>A DSM consisting of pixels with vegetation heights above ground. Pixels where no vegetation is present should be set to zero.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vegetation Trunk Zone DSM:</dt>
<dd><ul class="first last simple">
<li>A DSM (geoTIFF) consisting of pixels with vegetation trunk zone heights above ground. Pixels where no vegetation is present should be set to zero.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Use vegetation DSMs:</dt>
<dd><ul class="first last simple">
<li>Tick this box if you want to include vegetation (trees and bushes) when shadows are generated.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Trunk Zone DSM Exist:</dt>
<dd><ul class="first last simple">
<li>Tick this in if a trunk zone DSM already exist.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Transmissivity of Light Through Vegetation (%):</dt>
<dd><ul class="first last simple">
<li>Percentage of light that is penetrating through vegetation. Default value is set to 3 % according to Konarska et al. (2013).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Percent of Canopy Height:</dt>
<dd><ul class="first last simple">
<li>If a trunk zone vegetation DSM is absent, this can be generated based on the height of the Canopy DSM. The default percentage is set to 25%.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Specify Data:</dt>
<dd><ul class="first last simple">
<li>The data need to be set in the middle section.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Cast Shadows Only Once:</dt>
<dd><ul class="first last simple">
<li>Tick this box if you only want to cast one shadow. Below this tick box you can set the time that is needed to decide the position of the sun.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Time Interval between Casting of each Interval:</dt>
<dd><ul class="first last simple">
<li>If the above tick box (Cast shadows only once) is not ticked in, a number of shadows is generated based on the interval set.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>UTC Offset (Hours):</dt>
<dd><ul class="first last simple">
<li>Time zone needs to be specified. Positive numbers moving east(e.g. Stockholm UTC +1).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last simple">
<li>A specified folder where the result will be saved.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last simple">
<li>Starts the calculations</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add Results to Project:</dt>
<dd><ul class="first last simple">
<li>If ticked, the shadow raster will be added to the map canvas.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last simple">
<li>Closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first last simple">
<li>If only one shadow image is generated, one geoTIFF will be produced where pixel values of zero indicates shadow and one indicates sunlit. If daily shadow casting is used (Cast shadows only once ticked off), one shadow image for each time step as well as one shadow fraction image is generated. The shadow fraction image is given in percent where 100% meaning the a pixel is sunlit throughout the day used in the calculation.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Example of input data and result:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>shadow image in Gothenburg (1 m resolution), Sweden at 1 pm on the 2nd of October 2015 (daylight savings time).</dt>
<dd><div class="first last figure">
<img alt="_images/Shadow2.jpg" src="_images/Shadow2.jpg" />
</div>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks：</dt>
<dd><ul class="first last simple">
<li>All DSMs need to have the same extent and pixel</li>
<li>This plugin is computationally intensive i.e. large grids will take a lot of time and very large grids will not be possible to use. Large grids e.g. larger than 4000000 pixels should be tiled before.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References ：</dt>
<dd><ul class="first last simple">
<li>Konarska J, Lindberg F, Larsson A, Thorsson S, Holmer B 2013. Transmissivity of solar radiation through crowns of single urban trees—application for outdoor thermal comfort modelling. <a class="reference external" href="http://link.springer.com/article/10.1007/s00704-013-1000-3">Theoret. Appl. Climatol., 1–14</a></li>
<li>Lindberg, F., Grimmond, C.S.B., 2011a. The influence of vegetation and building morphology on shadow patterns and mean radiant temperatures in urban areas: model development and evaluation. <a class="reference external" href="http://link.springer.com/article/10.1007/s00704-010-0382-8">Theoret. Appl. Climatol. 105, 311–323</a></li>
<li>Ratti CF, Richens P (1999) Urban texture analysis with image processing techniques. In: Proceedings of the CAADFutures99, Atalanta, GA</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="solar-radiation-solar-energy-on-building-envelopes-sebe">
<h2>Solar Radiation: Solar Energy on Building Envelopes (SEBE)<a class="headerlink" href="#solar-radiation-solar-energy-on-building-envelopes-sebe" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">),</span> <span class="n">Dag</span> <span class="n">Wäsrberg</span> <span class="p">(</span><span class="n">Tyréns</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The <strong>SEBE</strong> plugin (Solar Energy on Building Envelopes) can be used to calculate pixel wise potential solar energy using ground and building digital surface models (DSM). SEBE is also able to estimate irradiance on building walls. Optionally, vegetation DSMs could also be used. The methodology that is used to generate irradiance is presented in Lindberg et al. (2015).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>The SEBE plugin is located at</dt>
<dd><ul class="first simple">
<li>UMEP</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Solar Radiation</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Solar Energy on Building Envelopes (SEBE)</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Related Preprocessors ：</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Meteorological_Data:_MetPreprocessor">MetdataPreprocessor</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Meteorological_Data:_Download_data_.28WATCH.29">Download data (WATCH)</a>, <a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual#Urban_Geometry:_Wall_Height_and_Aspect">Wall Height and Aspect</a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog box ：</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Consists of</dt>
<dd><ul class="first last">
<li><p class="first">top section where input data is specified</p>
</li>
<li><dl class="first docutils">
<dt>bottom section for specifying the output and for running the calculations</dt>
<dd><div class="first last figure">
<img alt="_images/SEBE1.png" src="_images/SEBE1.png" />
</div>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Building and Ground DSM:</dt>
<dd><ul class="first last simple">
<li>A DSM consisting of ground and building heights. This dataset also decides the latitude and longitude used for the calculation of the Sun position.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vegetation Canopy DSM:</dt>
<dd><ul class="first last simple">
<li>A DSM consisting of pixels with vegetation heights above ground. Pixels where no vegetation is present should be set to zero.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Vegetation Trunk Zone DSM:</dt>
<dd><ul class="first last simple">
<li>A DSM (geoTIFF) consisting of pixels with vegetation trunk zone heights above ground. Pixels where no vegetation is present should be set to zero.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Use Vegetation DSMs:</dt>
<dd><ul class="first last simple">
<li>Tick this box if you want to include vegetation (trees and bushes) into the analysis.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Trunk Zone DSM Exist:</dt>
<dd><ul class="first last simple">
<li>Tick this in if a trunk zone DSM already exist.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Transmissivity of Light Through Vegetation (%):</dt>
<dd><ul class="first last simple">
<li>Percentage of light that is penetrating through vegetation. Default value is set to 3 % according to Konarska et al. (2013).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Percent of Canopy Height:</dt>
<dd><ul class="first last simple">
<li>If a trunk zone vegetation DSM is absent, this can be generated based on the height of the Canopy DSM. The default percentage is set to 25%.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Wall Height Raster:</dt>
<dd><ul class="first last simple">
<li>A raster of the same size and extent as the ground and building DSM including information of the wall pixels and its height in meters above ground should be specified here. Non wall pixels should be set to zero. This raster is used to estimate irradiance on building walls and can be generated using the Wall Height and Aspect plugin located at UMEP  -&gt; Pre-processing  -&gt; Urban Geometry  -&gt; Wall Height and Aspect.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Wall Aspect Raster:</dt>
<dd><ul class="first last simple">
<li>A raster of the same size and extent as the ground and building DSM including information of the wall pixels and its aspect, i.e. angle, should be specified here. For example a wall facing towards the south has a value of 180°. Non wall pixels should be set to zero. This raster are used to estimate irradiance on building walls and can be generated using the Wall Height and Aspect plugin located at UMEP  -&gt; Pre-processing  -&gt; Urban Geometry  -&gt; Wall Height and Aspect.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Albedo:</dt>
<dd><ul class="first last simple">
<li>This parameter specifies the reflectivity of shortwave radiation of all surfaces (ground, roofs, walls and vegetation). It should be a value between 0 and 1. The default value is set to 0.15.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>UTC Offset (Hours):</dt>
<dd><ul class="first last simple">
<li>Time zone needs to be specified. Positive numbers increase when moving east (e.g. Stockholm UTC +1).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Estimate Diffuse and Direct Shortwave Components from Global Radiation:</dt>
<dd><ul class="first last simple">
<li>Tick this in if only global radiation is present. Diffuse and direct shortwave components will then be estimated from global radiation based on the statistical model presented by Reindl et al. (1990). If air temperature and relative humidity is present, the statistical model will perform better but it is able to estimate the components using only global shortwave radiation.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Input Meteorological File:</dt>
<dd><ul class="first last simple">
<li>Input meteorological data specifically formatted to be used in UMEP. This specific format can be created using UMEP  -&gt; Pre-processing  -&gt; Meteorological data  -&gt; Prepare existing data. A dataset with <strong>hourly</strong> time resolution should be used for SEBE, preferably at least <strong>one year in length</strong>. The time should be in [LST](<a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Abbreviations">http://urban-climate.net/umep/UMEP_Manual#Abbreviations</a>) for the specific location to be modelled. Multiple years can also be used to improve the model outcome. Model output is dependent on the meteorological input data so if a short dataset is used, potential solar energy would be valid for that particular time period only.</li>
<li>Mandatory data is global shortwave radiation, but the model will perform best if also diffuse and direct components are available.</li>
<li><dl class="first docutils">
<dt>The direct radiation component used as input in the SOLWEIG model is not the direct shortwave radiation on a horizontal surface but on a surface perpendicular to the light source. Hence, the relationship between global radiation and the two separate components are:</dt>
<dd><ul class="first last">
<li>Global radiation = direct radiation * sin(h) + diffuse radiation</li>
<li>where h is the sun altitude. Since diffuse and direct components of short wave radiation is not common data, it is also possible to calculate diffuse and direct shortwave radiation (see above).</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Save Sky Irradiance Distribution:</dt>
<dd><ul class="first last simple">
<li>When the box is ticked in, it is possible to save the radiation distribution from the sky vault calculated from the meteorological file. SEBE first distributes the radiation on 145 sky patches on the sky vault and then generates shadows on the DSMs based on these patches, i.e. the core loop in the model iterates 145 times. For more detailed information on this, see Lindberg et al. (2015).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output Folder:</dt>
<dd><ul class="first last simple">
<li>A specified folder where result will be saved should be specified here. One raster showing irradiance on ground and building roofs named Energyyearroof.tif is saved as well as a text file of wall irradiance (Energyyearwall.txt). Also, the ground and building DSM is saved in the output folder to be used later in a SEBE visualization plugin (UMEP  -&gt; Post-processing  -&gt; Solar Energy  -&gt; SEBE (Visualisation)).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Run:</dt>
<dd><ul class="first last simple">
<li>This starts the calculations.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add Roof and Ground Irradiance Result Raster to Project:</dt>
<dd><ul class="first last simple">
<li>If this is ticked in, <strong>Energyyearroof.tif</strong> will be loaded into to the map canvas.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last simple">
<li>This button closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Output:</dt>
<dd><ul class="first last simple">
<li>As mentioned earlier, three mandatory datasets are save is the model was successful. The geoTIFF <strong>Energyyearroof.tif</strong> show pixel wise total irradiance in kWh. <strong>Energyyearwall.txt</strong> show total wall irradiance for each wall column. The column voxel is decided based on the pixel resolution of the input data. Also, the ground and building DSM is saved in the output folder for later use. If the vegetation DSMs were added, one additional file (<strong>Vegetationdata.txt</strong>) including information of vegetation height and location are also saved. This file is also be used in the SBEB visualization plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Example of input data and result:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Input DSM (left) and irradiance image (right) in Gothenburg using data from 1977.</dt>
<dd><div class="first last figure">
<img alt="_images/SEBE2.jpg" src="_images/SEBE2.jpg" />
</div>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remarks：</dt>
<dd><ul class="first last simple">
<li>All DSMs need to have the same extent and pixel</li>
<li>This plugin is computationally intensive i.e. large grids will take a lot of time and very large grids will not be possible to use. Large grids e.g. larger than 4000000 pixels should be tiled before.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>References ：                                                                                                                                                                                                                                                                                                                                                                                                                                                        * References ：</dt>
<dd><ul class="first last simple">
<li>Konarska J, Lindberg F, Larsson A, Thorsson S, Holmer B 2013. Transmissivity of solar radiation through crowns of single urban trees—application for outdoor thermal comfort modelling. Theoret. Appl. Climatol., 1–14 <a class="reference external" href="http://link.springer.com/article/10.1007/s00704-013-1000-3">Link to Paper</a></li>
<li>Lindberg, F., Jonsson, P. &amp; Honjo, T. and Wästberg, D. (2015) Solar energy on building envelopes - 3D modelling in a 2D environment. Solar Energy. 115 (2015) 369–378 <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S0038092X15001164">Link to Paper</a></li>
<li>Reindl DT, Beckman WA, Duffie JA (1990) Diffuse fraction correlation. Sol Energy 45:1–7. <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/0038092X9090060P">Link to paper</a></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="post-processor">
<h1>Post-Processor<a class="headerlink" href="#post-processor" title="Permalink to this headline">¶</a></h1>
<div class="section" id="solar-radiation-sebe-visualisation">
<h2>Solar Radiation: SEBE (Visualisation)<a class="headerlink" href="#solar-radiation-sebe-visualisation" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Niklas</span> <span class="n">Krave</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The <strong>SEBE (Visualisation)</strong> plugin can be used to visulise 3D output from model results generated by the SEBE plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>The Shadow Generator is located at</dt>
<dd><ul class="first simple">
<li>UMEP</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>Post-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Solar Radiation</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>SEBE (Visualisation)</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog box  :</dt>
<dd><div class="first last figure">
<img alt="_images/SEBEvisualisation.png" src="_images/SEBEvisualisation.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections  :</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>top</td>
<td>Canvas for visualisation</td>
</tr>
<tr class="row-even"><td>bottom</td>
<td>Input data and settings</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>Select input folder:</dt>
<dd><ul class="first last">
<li>The directory where results from a previous model run in SEBE is located.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Area of visualisation:</dt>
<dd><ul class="first last">
<li>When this pushbutton is clicked, a recanglge can be drawn on the map canvas. This is the area that will be visulised.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Visulise:</dt>
<dd><ul class="first last">
<li>When this button is clicked, the selected rectangular area will be visulised in the SEBE (visualisation) canvas at the top of the GUI.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last">
<li>This closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="outdoor-thermal-comfort-solweig-analyzer">
<h2>Outdoor Thermal Comfort: SOLWEIG Analyzer<a class="headerlink" href="#outdoor-thermal-comfort-solweig-analyzer" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The <strong>SOLWEIG Analyzer</strong> plugin can be used to make basic analysis of model results generated by the SOLWEIG plugin.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>The SOLWEIG Analyzer is located at</dt>
<dd><ul class="first simple">
<li>UMEP</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>Post-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Outdoor Thermal Comfort</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>SOLWEIG Analyzer</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog box  :</dt>
<dd><div class="first last figure">
<img alt="_images/SOLWEIGAnalyzer.png" src="_images/SOLWEIGAnalyzer.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections  :</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>top</td>
<td>Input data is specified</td>
</tr>
<tr class="row-even"><td>left</td>
<td>Plotting of time series derived from Points of Interest during model calculations in SOLWEIG</td>
</tr>
<tr class="row-odd"><td>bottom</td>
<td>Analysis of spatial results from model calculations in SOLWEIG</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>Load model result:</dt>
<dd><ul class="first last">
<li>The directory where results from a previous model run in SOLWEIG is located.</li>
</ul>
</dd>
</dl>
</li>
<li>Point of Interest data:</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>POIs available</td>
<td>Here, a list of all available POI files are listed. Specify one of the POIs. If no variable is available, then no data if found in the Model output folder.</td>
</tr>
<tr class="row-even"><td>Variable</td>
<td>Specify one of the available variables to plot.</td>
</tr>
<tr class="row-odd"><td>Add another POI / variable</td>
<td>Tick this in to add another variable in the plot.</td>
</tr>
<tr class="row-even"><td>Scatterplot</td>
<td>Tick this in to generate a scatterplot between the two variables specified above.</td>
</tr>
<tr class="row-odd"><td>Plot</td>
<td>Plot the data selected above</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Spatial data  :</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Variable to visualize</td>
<td>Select a listed variable to process. If no variable is available, then no data if found in the Model output folder.</td>
</tr>
<tr class="row-even"><td>Show animation</td>
<td>This produces a time-related animation of the selected variable scaled based on the settings to the left in the GUI.</td>
</tr>
<tr class="row-odd"><td>Exclude building pixels</td>
<td>Tick this in to exclude building pixels using a building grid generated from the SOLWEIG run. The building grid must have the same extent and pixel resolution as the generated output maps in the model output folder.</td>
</tr>
<tr class="row-even"><td>Diurnal average</td>
<td>Tick this in to include all grids for the selected variable to derive a pixelwise average.</td>
</tr>
<tr class="row-odd"><td>Daytime average</td>
<td>Tick this in to include all daytime grids for the selected variable to derive a pixelwise average.</td>
</tr>
<tr class="row-even"><td>Nightime average</td>
<td>Tick this in to include all nighttime grids for the selected variable to derive a pixelwise average.</td>
</tr>
<tr class="row-odd"><td>Maximum</td>
<td>Tick this in to get the pixelwise maximum for the selected variable.</td>
</tr>
<tr class="row-even"><td>Minimum</td>
<td>Tick this in to get the pixelwise minimum for the selected variable.</td>
</tr>
<tr class="row-odd"><td>Average of specific time of day</td>
<td>The average of the selected time of day for the variable selected is generated. If ‘Not Specified’ is highlighted, no grid will be generated.</td>
</tr>
<tr class="row-even"><td>Maximum of specific time of day</td>
<td>The maximum of the selected time of day for the variable selected is generated. If ‘Not Specified’ is highlighted, no grid will be generated.</td>
</tr>
<tr class="row-odd"><td>Minimum of specific time of day</td>
<td>The minimum of the selected time of day for the variable selected is generated. If ‘Not Specified’ is highlighted, no grid will be generated.</td>
</tr>
<tr class="row-even"><td>T<sub>mrt</sub>: Percent of time above threshold (degC)</td>
<td>If T<sub>mrt</sub> is the selected variable, this box become active and calculates the percent of time that T<sub>mrt</sub> for each is above the threshold specified to the right.</td>
</tr>
<tr class="row-odd"><td>T<sub>mrt</sub>: Percent of time below threshold (degC)</td>
<td>If T<sub>mrt</sub> is the selected variable, this box become active and calculates the percent of time that T<sub>mrt</sub> for each is below the threshold specified to the right.</td>
</tr>
<tr class="row-even"><td>Output folder</td>
<td>Directory where the results specified above will be saved.</td>
</tr>
<tr class="row-odd"><td>Add analysis to map canvas</td>
<td>All analysis specified above will be added to the map canvas if this box is ticked in.</td>
</tr>
<tr class="row-even"><td>Generate</td>
<td>Starts the spatial processing/analysis.</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last">
<li>This closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="urban-energy-balance-suews-analyser">
<h2>Urban Energy Balance: SUEWS Analyser<a class="headerlink" href="#urban-energy-balance-suews-analyser" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fredrik</span> <span class="n">Lindberg</span> <span class="p">(</span><span class="n">Gothenburg</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Introduction:</dt>
<dd><ul class="first last simple">
<li>The <strong>SUEWS Analyzer</strong> plugin can be used to make basic analysis of model results generated by the <em>SUEWS Simple</em> and <em>SUEWS Advanced</em> plugins.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>The SUEWS Analyzer is located at</dt>
<dd><ul class="first simple">
<li>UMEP</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>Post-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Urban Energy Balance</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>SUEWS Analyzer</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Dialog box  :</dt>
<dd><div class="first last figure">
<img alt="_images/SUEWSAnalyzer.png" src="_images/SUEWSAnalyzer.png" />
</div>
</dd>
</dl>
</li>
<li><p class="first">Dialog sections  :</p>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>top</td>
<td>Model results to be analyzer is specified.</td>
</tr>
<tr class="row-even"><td>left</td>
<td>Plotting of time series derived from Points of Interest during model calculations in SUEWS</td>
</tr>
<tr class="row-odd"><td>bottom</td>
<td>Analysis of spatial results from model calculations in SUEWS</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Load model result:</dt>
<dd><ul class="first last simple">
<li>A namelist (<em>RunControl.nml</em>) used for the model run should be specified. This can be located in the <strong>suewsmodel</strong> directory found as a sub-directory of the <strong>UMEP</strong>-plugin directory. Note that the namelist includes information on the last model run performed.</li>
</ul>
</dd>
</dl>
<ul class="simple">
<li>Point data:</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Grid</td>
<td>Here, a list of all available modeled grids are listed. Specify one of the grid IDs. If no grid is available, then no data if found in the model output folder.</td>
</tr>
<tr class="row-even"><td>Year to investigate</td>
<td>Specify one of the available years to plot.</td>
</tr>
<tr class="row-odd"><td>Plot basic data</td>
<td>Tick this in to plot a summary of the most essential output variables.</td>
</tr>
<tr class="row-even"><td>Time Period (DOY)</td>
<td>Specify the time period to plot.</td>
</tr>
<tr class="row-odd"><td>Variable</td>
<td>Specify one of the available variables to plot.</td>
</tr>
<tr class="row-even"><td>Include another variable</td>
<td>Tick this in to add another variable in the plot.</td>
</tr>
<tr class="row-odd"><td>Grid</td>
<td>Here, a list of all available modeled grids are listed. Specify one of the grid IDs. If no grid is available, then no data if found in the model output folder.</td>
</tr>
<tr class="row-even"><td>Variable</td>
<td>Specify one of the available variables to plot.</td>
</tr>
<tr class="row-odd"><td>Scatterplot</td>
<td>Tick this in to generate a scatterplot between the two variables specified above.</td>
</tr>
<tr class="row-even"><td>Plot</td>
<td>Plot the data selected above</td>
</tr>
</tbody>
</table>
<p>Spatial data:</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Variable to analyze</td>
<td>Select a listed variable to process. If no variable is available, then no data if found in the Model output folder.</td>
</tr>
<tr class="row-even"><td>Year to investigate</td>
<td>Specify one of the available years to plot.</td>
</tr>
<tr class="row-odd"><td>Time Period (DOY)</td>
<td>Specify the time period to plot.</td>
</tr>
<tr class="row-even"><td>Average</td>
<td>Tick this in to derive a grid-wise average.</td>
</tr>
<tr class="row-odd"><td>Maximum</td>
<td>Tick this in to derive a grid-wise maximum.</td>
</tr>
<tr class="row-even"><td>Minimum</td>
<td>Tick this in to derive a grid-wise minimum.</td>
</tr>
<tr class="row-odd"><td>Median</td>
<td>Tick this in to derive a grid-wise median value.</td>
</tr>
<tr class="row-even"><td>IQR</td>
<td>Tick this in to derive a grid-wise interquartile range.</td>
</tr>
<tr class="row-odd"><td>Diurnal</td>
<td>Tick this in to include diurnal (all) data.</td>
</tr>
<tr class="row-even"><td>Daytime</td>
<td>Tick this in to include daytime data.</td>
</tr>
<tr class="row-odd"><td>Nightime</td>
<td>Tick this in to include nighttime data.</td>
</tr>
<tr class="row-even"><td>Vector polygon grid used in the SUEWS model</td>
<td>Specify the grid that was used to generate the input data to the SUEWS model run of interest.</td>
</tr>
<tr class="row-odd"><td>ID</td>
<td>Specify the attribute ID used to generate the input data to the SUEWS model run of interest.</td>
</tr>
<tr class="row-even"><td>Add result to polygon grid</td>
<td>Tick this box to add the results in the attribute table of the grid specified.</td>
</tr>
<tr class="row-odd"><td>Save of GeoTIFF</td>
<td>Tick this in to generate a raster grid from the analyze settings specified.</td>
</tr>
<tr class="row-even"><td>Irregular grid (not squared)</td>
<td>Tick this in if a grid is irregular i.e. not squared and aligned north to south.</td>
</tr>
<tr class="row-odd"><td>Pixel resolution (m)</td>
<td>When a irregular grid is used, a pixel resolution in meters must be specified.</td>
</tr>
<tr class="row-even"><td>Output filename</td>
<td>Name of the GeoTIFF to be saved.</td>
</tr>
<tr class="row-odd"><td>Add analysis to map canvas</td>
<td>All analysis specified above will be added to the map canvas if this box is ticked in.</td>
</tr>
<tr class="row-even"><td>Generate</td>
<td>Starts the spatial processing/analysis.</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><dl class="first docutils">
<dt>Close:</dt>
<dd><ul class="first last">
<li>This closes the plugin.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="benchmark-system">
<h2>Benchmark System<a class="headerlink" href="#benchmark-system" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Contributor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ting</span> <span class="n">Sun</span> <span class="p">(</span><span class="n">Reading</span><span class="p">),</span> <span class="n">Sue</span> <span class="n">Grimmond</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Overview :</dt>
<dd><ul class="first last simple">
<li><strong>Note</strong>: the current version runs in a command-line interface (CLI) driven by Python and the GUI-based version is under construction.</li>
<li>The Benchmark System for SUEWS (BSS) can be used with SUEWS to assess the model performance between different configurations and model generations. BSS is written in Python and shipped with an example namelist and an MS Excel spreadsheet for header lookup between different SUEWS versions.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>The SUEWS Analyzer is located at</dt>
<dd><ul class="first simple">
<li>UMEP</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>Post-Processor</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Benchmark</li>
</ul>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Benchmark results:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Two types of metrics are provided: :</dt>
<dd><ul class="first last simple">
<li>overall performance score: a score between 0 and 100 with larger score denoting better overall performance</li>
<li>specific statistics: a range of statistics, including Mean absolute error (MAE), root mean square error (RMSE), standard deviation (Std), etc., to indicate detailed performance in specific variables.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>The users can use the overall performance score to get the performance overview of all configurations (Fig. 1a) and specific statistics to examine the performance details (Fig. 1b).</dt>
<dd><div class="first figure">
<img alt="_images/300px-BSS-result.png" src="_images/300px-BSS-result.png" />
</div>
<p class="last">Figure 1: BSS results for (a) the overall performance and (b) a specific statistics (e.g., RMSE)</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Usage:</dt>
<dd><ul class="first last simple">
<li>To use BSS, in addition to the mandatory BSS files (i.e., Benchmark_SUEWS.py, benchmark.nml and head-2016to2017.xlsx), the SUEWS output results are required to be placed in a separate folder (e.g., “input”) that contains the sub-folders of results produced by different configurations. A sample layout of the BSS test case refers to Fig. 2. It must be noted that the output files to be benchmarked should be of consistent temporal organisation (i.e., identical length and resolution) while the headers of different files are not necessarily to be identical as BSS will handle the header inconsistency automatically. Besides, two sub-folders, “base” and “ref”, which contain the baseline results to be tested against and reference results to be compared with, respectively, must exist otherwise the BSS will stop.   |</li>
<li>When the SUEWS output files are prepared, the namelist (i.e., benchmark.nml) needs to be set for the benchmarking. The benchmark namelist is fairly self-explanatory and consists two sections, “file” and “benchmark”, to play with. One tip is about the variable list (i.e., var_list): if one non-string value is set (e.g., 123, 3.2, etc.), all valid variables will be included in the benchmarking. Then the user can execute the Benchmark_SUEWS.py script and a PDF file with benchmark results will be generated (e.g., benchmark.pdf in Fig. 2).
.. figure:: /IMAGES/300px-BSS-file-layout.png
Figure 2: Required file organisation by BSS.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Namelist: benchmark.nml:</dt>
<dd><ul class="first last">
<li><p class="first">The benchmark namelist is fairly self-explanatory and consists two sections, “file” and “benchmark”, to play with.</p>
</li>
<li><p class="first">One tip is about the variable list (i.e., var_list): if one non-string value is set (e.g., 123, 3.2, etc.), all valid variables will be included in the benchmarking.</p>
</li>
<li><p class="first">A sample namelist is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&amp;file
  input_dir = &#39;input&#39;
  output_pdf = &#39;benchmark&#39;
/
&amp;benchmark
  list_var=&#39;QN&#39; &#39;QS&#39; &#39;QE&#39; &#39;QH&#39;
  list_metric=&#39;MAE&#39; &#39;MBE&#39; &#39;RMSE&#39;
  method_score=1 ! not used yet
/
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="people-involved-acknowledgements">
<h1>People Involved &amp; Acknowledgements<a class="headerlink" href="#people-involved-acknowledgements" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="62%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Group</th>
<th class="head">Institution &amp; Support Acknowledged</th>
<th class="head">Team</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Sue Grimmond</td>
<td><em>University of Reading, UK</em></td>
<td><table border="1" class="first last docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Christoph W. Kent</td>
</tr>
<tr class="row-even"><td>Helen Ward</td>
</tr>
<tr class="row-odd"><td>Ting Sun</td>
</tr>
<tr class="row-even"><td>Izzy Capel-Timms</td>
</tr>
<tr class="row-odd"><td>Andy Gabey</td>
</tr>
<tr class="row-even"><td>Bei HUANG</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-odd"><td>Fredrik Lindberg</td>
<td><p class="first"><em>University of Gothenburg, Sweden</em></p>
<table border="1" class="last docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>H2020 UrbanFluxes</td>
</tr>
<tr class="row-even"><td>FORMAS Climplan</td>
</tr>
</tbody>
</table>
</td>
<td><table border="1" class="first last docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Frans Olofsson</td>
</tr>
<tr class="row-even"><td>Niklas Krave</td>
</tr>
<tr class="row-odd"><td>Shiho Onomura</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-even"><td>Leena Järvi</td>
<td><p class="first"><em>University of Helsinki, Finland</em></p>
<table border="1" class="last docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Maj and Tor Nessling foundation</td>
</tr>
<tr class="row-even"><td>Academy of Finland</td>
</tr>
<tr class="row-odd"><td>EUf7 Bridge</td>
</tr>
</tbody>
</table>
</td>
<td>Tom Kokkonen</td>
</tr>
<tr class="row-even"><td>Jian Guo Tan</td>
<td><em>Shanghai Institute of Meteorological Sciences, SMS, CMA, China</em></td>
<td><table border="1" class="first last docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Yuan Yong Chang</td>
</tr>
<tr class="row-even"><td>Dongwei Liu</td>
</tr>
<tr class="row-odd"><td>XY Ao</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<p>To help users getting started with UMEP, the community is working on
setting up tutorials and instructions for different parts of the UMEP
tool. The following gives what are available and planned. <a class="reference external" href="https://docs.google.com/forms/d/e/1FAIpQLSfH8eEly28SjtfvooWtJe95iRvLNV2tewNa3ZajrVFTXMKIfQ/viewform?formkey=dExvc3V1RDBqWmlIcURfLW5VOGtvQ0E6MQ&amp;ifq">To get the
Password to access the data for the different
tutorials</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="11%" />
<col width="36%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Topic</th>
<th class="head">Parts of UMEP</th>
<th class="head">Name</th>
<th class="head">Application</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Source Area Footprint</td>
<td>Pre-Processor</td>
<td><a class="reference external" href="http://www.urban-climate.net/umep/UMEP/_Tutorials/_Footprint">Footprint</a></td>
<td>Interpretation of eddy covariance flux source areas</td>
</tr>
<tr class="row-odd"><td>Urban energy balance</td>
<td>Processor</td>
<td><a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual/_Tutorials/IntroductionToSuews">Introduction to SUEWS</a></td>
<td>Energy, water and radiation fluxes</td>
</tr>
<tr class="row-even"><td>Urban energy balance</td>
<td>Pre-Processor and Processor</td>
<td><a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual/_Tutorials/_SUEWS_Advanced">SUEWS Advanced</a></td>
<td>Energy, water and radiation fluxes</td>
</tr>
<tr class="row-odd"><td>Potential solar energy production on building envelopes</td>
<td>Processor and Post-Processor</td>
<td><a class="reference external" href="http://www.urban-climate.net/umep/UMEP_Manual/_Tutorials/SEBE">SEBE</a></td>
<td>Amount of solar energy received on building facets</td>
</tr>
<tr class="row-even"><td>Outdoor thermal comfort</td>
<td>Pre-Processor and Processor</td>
<td><a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual/_Tutorials/IntroductionToSolweig">Introduction to SOLWEIG</a></td>
<td>Mean radiation temperature modelling in complex urban settings</td>
</tr>
<tr class="row-odd"><td>Anthropogenic heat</td>
<td>Processor</td>
<td><code class="xref any docutils literal notranslate"><span class="pre">GQ:sub:`F</span></code> &lt;UMEP_Manual/_Tutorials/GQF&gt;`__</td>
<td>Anthropogenic heat modelling for the greater London area using GQF (uses the GreaterQF methodology)</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Anthropogenic heat</td>
<td>Processor</td>
<td><code class="xref any docutils literal notranslate"><span class="pre">LQ:sub:`F</span></code> &lt;UMEP_Manual/_Tutorials/LQF&gt;`__</td>
<td>Anthropogenic heat modelling in London using LQF (uses the LUCY methodology)</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="how-to-contribute">
<h1>How to Contribute<a class="headerlink" href="#how-to-contribute" title="Permalink to this headline">¶</a></h1>
<p>UMEP is an an open source tool that we are keen to get others inputs and
contributions. There are two main ways to contribute:</p>
<ol class="arabic simple">
<li>Submit comments or issues to the
<a class="reference external" href="https://bitbucket.org/fredrik_ucg/umep/issues">repository</a></li>
<li>Participate in <a class="reference external" href="http://urban-climate.net/umep/DevelopmentGuidelines">Coding or adding new
features</a>.</li>
<li>Create new tutorials for the UMEP-plugin.</li>
</ol>
<div class="section" id="reporting-a-bug">
<h2>Reporting a Bug<a class="headerlink" href="#reporting-a-bug" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>As a good citizen of the open source community please report bugs. If
it is a UMEP plugin related issue - report this to the
<a class="reference external" href="https://bitbucket.org/fredrik_ucg/umep/issues">https://bitbucket.org/fredrik_ucg/umep/issues UMEP
plugin</a>. You can
see if your bug is already reported. In order for the UMEP team to
solve your issue as easy as fast as possible, please provide a full
description of the problem including steps to repeat it. The more
info given, the easier it is for us to solve your issues.</li>
<li><strong>Please have a look at Known Issues and FAQ (found below) before
submitting an issue to the repository</strong>.</li>
<li>A bug may also be caused by <a class="reference external" href="http://hub.qgis.org/issues">QGIS</a>. By
reporting bugs (and also maybe helping out to solve them) is
essential to the open source community. At [www.qgis.org
www.qgis.org] you can find out more on what you can do to get
involved.</li>
<li>QGIS: how to report a QGIS issue:
<a class="reference external" href="http://qgis.org/en/site/getinvolved/development/index.html#qgis-bugreporting">http://qgis.org/en/site/getinvolved/development/index.html#qgis-bugreporting</a>.</li>
</ul>
</div>
</div>
<div class="section" id="known-issues">
<h1>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>QGIS (27/September/2017) <strong>had</strong> an issue using gdal which causes
QGIS to create a minidump when the software is closed. This issue has
now been fixed (issue
#<a class="reference external" href="https://hub.qgis.org/issues/13061">13061</a>). Other issues found
should be reported to our
<a class="reference external" href="https://bitbucket.org/fredrik_ucg/umep/issues">repository</a>.</li>
<li>UMEP plugin is not compatible with matplotlib versions 2.x. Use
instead 1.5.x. (23/August/2017)</li>
<li>Mac users might have issue pointing at non-existing directories. Work
around is to manually create directories before starting any
UMEP-process.</li>
<li>Only use standard English alpha-numeric characters (e.g. no space, å,
% etc.)</li>
<li>Issues has been reported using .sdat rasters. GeoTiff are
recommended.</li>
</ul>
</div>
<div class="section" id="faq-frequently-asked-questions">
<h1>FAQ (Frequently Asked Questions)<a class="headerlink" href="#faq-frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="abbreviations">
<h1>Abbreviations<a class="headerlink" href="#abbreviations" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="35%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Acronym</th>
<th class="head">Defintion</th>
<th class="head">Comments</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>CDSM</td>
<td>Canopy Digital Surface Model</td>
<td>A vegetation raster grid where vegetation heights is given in meter above ground level. Pixels with no vegetation should be zero.</td>
</tr>
<tr class="row-odd"><td>CRS</td>
<td>Coordinate Reference System</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>CRU</td>
<td>Climatic Research Unit</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>DEM</td>
<td>Digtial Elevation Model</td>
<td>Here, same definition as DTM.</td>
</tr>
<tr class="row-even"><td>DSM</td>
<td>Digital Surface Model</td>
<td>A raster grid including both buildings and ground given in meter above sea level.</td>
</tr>
<tr class="row-odd"><td>DTM</td>
<td>Digtial Terrain Model</td>
<td>A raster grid including only ground heights given in meter above sea level.</td>
</tr>
<tr class="row-even"><td>ECMWF</td>
<td>European Centre for Medium-Range Weather Forecasts</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>GIS</td>
<td>Geographical Information System</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>LCZ</td>
<td>Local Climate Zone</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>LST</td>
<td>Local Standard Time</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>LTR</td>
<td>Long term release</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>LUCY</td>
<td>Large scale Urban Consumption of energy model</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>m agl</td>
<td>metres above ground level</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>m asl</td>
<td>metres above sea level</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>OTF</td>
<td>On the Fly</td>
<td>Used in QGIS when different geodatasets with different coordinate systems are projected in the same automatically.</td>
</tr>
<tr class="row-odd"><td>Q<sub>F</sub></td>
<td>Anthropogenic heat flux</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>SEBE</td>
<td>Solar Energy on Building Envelopes</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>SOLWEIG</td>
<td>Solar and longwave environmental irradiance geometry model</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>SUEWS</td>
<td><a class="reference external" href="http://urban-climate.net/umep/SUEWS">http://urban-climate.net/umep/SUEWS</a> | Surface urban energy and water balance scheme</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>SVF</td>
<td>Sky View Factor</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>TDSM</td>
<td>Trunk zone Digital Surface Model</td>
<td>A raster grid specifying the height up to the buttom of a vegetation canopy in meter above ground level. Pixels with no trunk height should be zero.</td>
</tr>
<tr class="row-odd"><td>UMEP</td>
<td>Urban Multi-scale Environmental Predictor</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>WFDEI</td>
<td>WATCH Forcing Data methodology applied to ERA-Interim data</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>WUDAPT</td>
<td>The World Urban Database and Access Portal Tools</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Fredrik Lindberg, Ting Sun, Sue Grimmond, Yihao Tang.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>