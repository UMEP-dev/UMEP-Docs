.. _UWG:

Urban Heat Island: Urban Weather Generator
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. note:: This plugin is still experimental. Please report any issues to our `code repository <https://github.com/UMEP-dev/UMEP>`__.

* Contributors:
   .. list-table::
      :widths: 50 50
      :header-rows: 1

      * - Name
        - Institution
      * - Fredrik Lindberg
        - Gothenburg

* Introduction
    The **Urban Weather Generator** (UWG) tool is an implementation of the `Ladybug <https://github.com/ladybug-tools/uwg>`__ application with the same name. The `original Urban Weather Generator <http://urbanmicroclimate.scripts.mit.edu/uwg.php>`__ was developed by Bruno Bueno for `his PhD thesis at MIT <https://dspace.mit.edu/handle/1721.1/59107>`__. Since this time, it has been validated 3 times and has been `enhanced by Aiko Nakano <https://dspace.mit.edu/handle/1721.1/108779>`__. In 2016, Joseph Yang also `improved the engine and added a range of building templates <https://dspace.mit.edu/handle/1721.1/107347>`__. For more detailed information on UWG, follow the links above.

    In UMEP, we have configured this tool so you can run the UWG on mutiple grids to obtain spatial informationon on the urban heat island for your specific city. It is also possible to run for a sinlge location within your city. See `UWGPrepare` for more information. UWG is only available via `UMEPforProcessing`.

* Related Preprocessors and PostProcessors
   `UWGReclassifier`, `UWGPrepare`, `UWGAnalyser`

* Dialog box
   .. figure:: /images/UWGInterface.jpg
      :width: 75%
      :align: center

      The dialog for the Urban Weather Generator tool. Click on image for enlargement.

* Parameters 
   .. list-table::
      :widths: 25 75
      :header-rows: 0

      * - Path to folder where UWG input files are located
        - Path that contains .uwg-files generated by `UWGPrepare <UWGPrepare>`.
      * - Vector data including location(s) to model
        - A vectory polygon grid that depicts the modelling area(s). This should be the same polygon layer that was used in `UWGPrepare <UWGPrepare>`.
      * - ID field
        - Choose an attribute from the selected polygon layer that will be used to separate the different polygon objects from each other. An attribute field of unique numbers or letters should be used.
      * - Start date of simulation
        - Date that simulation will start from. Year is inrelevant in this case as this is taken from the input meteorological forcing data.
      * - Number of days to run simulation
        - Specify the number of days that the UWG will model. Number of days in combination with Start date cannot exceed into next the following year.
      * - Input meteorological file (.epw)
        - The UWG make use of Energy Plus Weather (EPW) files (.epw). These files are generated for purposes of building energy simulation and are one full year in length (hourly resolution). However, the UWG can preferably model just a portion of a year and not always a full year which will take long computation time, especially if multiple grids are inverstigated. Information on EWP-files and possible downloads for your location can be found `here <https://energyplus.net/weather>`__. The UMEP developer team is also working on a tool that can be used to generate epw-files from e.g. ERA5 data or observations.
      * - Save output in UMEP specific format
        - Tick this in if you are interested in continuing analysis from this tool in the `UWG Analyser <UWGAnalyser>` in the post-processing part of UMEP.
      * - Output folder
        - Here your output data will be saved.


* Run
    Starts the calculations. 

* Help
    Link to this manual page.

* Close
    Closes the plugin.

 
* Remarks
      - If you like to get more detailed messages from the UWG, open the Python console in QGIS before you execute the model.
      - Issues where UWG becomes unstable has been noticed when large building bodies have been present (i.e. low vertical to horisontal ratios). An `issue <https://github.com/ladybug-tools/uwg/issues/262>`__ have been submitted. If the model crash for one grid, the UWG in UMEP will automatically skip this grid and move on the the next.
      - A tutorial is being constructed on how to analyse the urban heat island using UMEP.

